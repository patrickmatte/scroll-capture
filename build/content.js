!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e,s){"use strict";function i(t,e=1){const s=Math.pow(10,e);return Math.round(t*s)/s}function n(t){return i(t,1)}function a(t){return i(t,2)}function r(t){return i(t,3)}function o(t,e,s,i){e||(e=","),isNaN(s)&&(s=0),i||(i="0");const n=t%1;let a=Math.floor(t).toString();const r=a.length;if(0!==s&&s>r){s-=r;const t=i||"0";for(;s--;)a=t+a}if(null!==e&&a.length>3){const t=Math.floor(a.length/3),s=a.length%3,i=a.split("");let n=-1;for(;++n<t;)i.splice(s+4*n,0,e);0===s&&i.shift(),a=i.join("")}return 0!==n&&(a+=n.toString().substr(1)),a}function h(t){if(t>=10&&t<=20)return"th";if(0===t)return"";switch(t%10){case 3:return"rd";case 2:return"nd";case 1:return"st";default:return"th"}}function l(t){return t<10?"0"+t:t.toString()}function c(t,e,s){return t+s*(e-t)}function u(t,e){return Math.floor(t+Math.random()*(e-t+1))}s.d(e,"i",(function(){return i})),s.d(e,"f",(function(){return n})),s.d(e,"g",(function(){return a})),s.d(e,"h",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return h})),s.d(e,"a",(function(){return l})),s.d(e,"d",(function(){return c})),s.d(e,"e",(function(){return u}))},function(t,e,s){"use strict";function i(t,e,s=""){chrome.runtime.sendMessage({txt:"scrollCaptureTrackEvent",category:t,action:e,label:s})}function n(t){chrome.runtime.sendMessage({txt:"scrollCaptureTrackPage",path:t})}s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return n}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return transformLiterals}));let supportsTemplateLiterals=!1;try{eval("`foo`"),supportsTemplateLiterals=!0}catch(t){}function transformLiterals(t){if(!supportsTemplateLiterals){let e=t.split("`").join("").split("${"),s=[];for(let t=0;t<e.length;t++){let i=e[t];if(-1==i.indexOf("}"))i&&(i="'"+i+"'",s.push(i));else{let t=i.split("}");for(let e=0;e<t.length;e++){let i=t[e];i&&(e>0&&(i="'"+i+"'"),s.push(i))}}}t=s.join(" + ")}return t}},function(t,e,s){s(7),t.exports=s(4)},function(t,e,s){},,,function(t,e,s){"use strict";s.r(e),s.d(e,"app",(function(){return Ut})),s.d(e,"default",(function(){return Wt}));var i=s(1),n=s(0);class a{constructor(t=0,e=0){this.x=t,this.y=e}static lerp(t,e,s){return new a(Object(n.d)(t.x,e.x,s),Object(n.d)(t.y,e.y,s))}static distance(t,e=new a){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}static polar(t,e){return new a(t*Math.cos(e),t*Math.sin(e))}static getAngle(t,e=new a){return Math.atan2(t.y-e.y,t.x-e.x)}static random(){return new a(Math.random(),Math.random())}static rotate(t,e){const s=Math.cos(e)*t.x-Math.sin(e)*t.y,i=Math.sin(e)*t.x+Math.cos(e)*t.y;t.x=s,t.y=i}add(t){return new a(this.x+t.x,this.y+t.y)}get magnitude(){return a.distance(this)}abs(){return new a(Math.abs(this.x),Math.abs(this.y))}clamp(t,e,s,i){this.clampX(t,e),this.clampY(s,i)}clampX(t,e){this.x=Math.max(this.x,t),this.x=Math.min(this.x,e)}clampY(t,e){this.y=Math.max(this.y,t),this.y=Math.min(this.y,e)}copyFrom(t){this.x=t.x,this.y=t.y}clone(){return new a(this.x,this.y)}equals(t){return this.x===t.x&&this.y===t.y}divide(t){return new a(this.x/t.x,this.y/t.y)}divideScalar(t){return new a(this.x/t,this.y/t)}multiply(t){return new a(this.x*t.x,this.y*t.y)}multiplyScalar(t){return new a(this.x*t,this.y*t)}set(t,e){this.x=t,this.y=e}subtract(t){return new a(this.x-t.x,this.y-t.y)}serialize(){return{x:this.x,y:this.y}}deserialize(t){this.copyFrom(t)}math(t){return this.x=t(this.x),this.y=t(this.y),this}toString(){return"[Point x="+this.x+" y="+this.y+"]"}}class r{constructor(t=0,e=0,s=0,i=0){this._position=new a,this._size=new a,this.center=new a,this.halfSize=new a,this.x=t,this.y=e,this.width=s,this.height=i}get x(){return this.position.x}set x(t){this.position.x=t,this.center.x=this.position.x+this.halfSize.x}get y(){return this.position.y}set y(t){this.position.y=t,this.center.y=this.position.y+this.halfSize.y}get width(){return this.size.x}set width(t){this.size.x=t,this.halfSize.x=t/2,this.center.x=this.position.x+this.halfSize.x}get height(){return this.size.y}set height(t){this.size.y=t,this.halfSize.y=t/2,this.center.y=this.position.y+this.halfSize.y}contains(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height}intersects(t){return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height}intersect(t){const e=this,s=Math.max(e.x,t.x),i=Math.min(e.x+e.width,t.x+t.width),n=Math.max(e.y,t.y),a=Math.min(e.y+e.height,t.y+t.height);let o;return o=i>=s&&a>=n?new r(s,n,i-s,a-n):new r,o}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}clone(){return new r(this.x,this.y,this.width,this.height)}copyFrom(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}get position(){return this._position}set position(t){this._position=t,this.center.x=this.position.x+this.halfSize.x,this.center.y=this.position.y+this.halfSize.y}get size(){return this._size}set size(t){this._size=t}get area(){return this.size.x*this.size.y}toString(){return"[Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"}get widthToHeight(){return this.width/this.height}get heightToWidth(){return this.height/this.width}scaleWidth(t){return new r(this.x,this.y,t*this.widthToHeight,t)}scaleHeight(t){return new r(this.x,this.y,t,t*this.heightToWidth)}scaleToFillRect(t){const e=this.getScaleToFill(t);return this.scale(e,e)}scaleToFitRect(t){const e=this.getScaleToFitRect(t);return this.scale(e,e)}scale(t,e){return new r(this.x,this.y,this.width*t,this.height*e)}scaleToArea(t){const e=Math.sqrt(t/this.widthToHeight);return new r(0,0,t/e,e)}getScaleToFill(t){let e;return e=this.widthToHeight>t.widthToHeight?t.height/this.height:t.width/this.width,e}getScaleToFitRect(t){let e;return e=this.widthToHeight>t.widthToHeight?t.width/this.width:t.height/this.height,e}get isPortrait(){return this.width<=this.height}get isLandscape(){return this.height<=this.width}get topLeft(){return this.position}get topRight(){return new a(this.x+this.width,this.y)}get bottomRight(){return this.position.add(this.size)}get bottomLeft(){return new a(this.x,this.y+this.height)}getRandomPoint(){const t=a.random();return t.x*=this.size.x,t.y*=this.size.y,this.position.add(t)}}let o,h;function l(t,e,s,i=!1){for(s||(s=new a);t&&t!==e;)i&&console.log("localToGlobal element",t.nodeName,t.className,t.offsetTop),s.x+=t.offsetLeft,s.y+=t.offsetTop,t=t.parentNode;return s}"undefined"!=typeof navigator&&(o={android:!!navigator.userAgent.match(/Android/i),blackBerry:!!navigator.userAgent.match(/BlackBerry/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),windows:!!navigator.userAgent.match(/IEMobile/i)},o.any=o.android||o.blackBerry||o.iOS||o.windows),"undefined"!=typeof window&&(h="ontouchend"in window);const c={mouseover:"mouseover",mouseout:"mouseout",mousedown:"mousedown",mouseup:"mouseup",mousemove:"mousemove",click:"click",transitionend:"transitionend",animationstart:"animationstart",animationiteration:"animationiteration",animationend:"animationend"};h&&(c.mouseover="touchstart",c.mouseout="touchend",c.mousedown="touchstart",c.mouseup="touchend",c.mousemove="touchmove",c.click="click");const u={OTransition:{transitionend:"otransitionend",animationstart:"oanimationstart",animationiteration:"oanimationiteration",animationend:"oanimationend"},MozTransition:{transitionend:"transitionend",animationstart:"moznimationstart",animationiteration:"moznimationiteration",animationend:"moznimationend"},WebkitTransition:{transitionend:"webkitTransitionEnd",animationstart:"webkitAnimationStart",animationiteration:"webkitAnimationIteration",animationend:"webkitAnimationEnd"}};"undefined"!=typeof window&&window.addEventListener("load",(function(){for(const t in u){const e=u[t];void 0!==document.body.style[t]&&(c.transitionend=e.transitionend,c.animationstart=e.animationstart,c.animationiteration=e.animationiteration,c.animationend=e.animationend)}}));class d extends Event{constructor(t,e,s){super(t,s),this.data=e}}class p extends d{static dispatch(t,e,s){t.dispatchEvent(new p(e,s))}}class m extends EventTarget{get value(){return this._value}set value(t){(t!==this._value||this.forceChangeEvent)&&(this._value=t,p.dispatch(this,"value",this.value))}reset(t){this.value=t}toString(){return this.debug&&console.log("Data.toString",this.value),this.value.toString()}serialize(){return this.value}deserialize(t){this.value=t}copy(t){this.value=t.value,p.dispatch(this,"value",this.value)}destroy(){return this.value=null,super.destroy()}static get CHANGE(){return"value"}}class v extends m{constructor(t,e=[]){super(),this.modifiers=e,this.length=new m,this.value=t}get value(){return super.value}set value(t){for(let e=0;e<this.modifiers.length;e++){const s=this.modifiers[e];s&&(t=s(t))}super.value=t,this.length.value=Math.max(1,this.value.toString().length)}destroy(){if(this.modifiers=[],this.validation)try{this.validation.destroy()}catch(t){}return this.validation=null,super.destroy()}}class g extends v{constructor(t=!1,e=[]){super(t,e)}get value(){return super.value}set value(t=!1){super.value=function(t=!1){return-1!==["true","1","yes","y","on"].indexOf(String(t).toLowerCase())}(t)}reset(t=!1){super.reset(t)}}class y extends v{constructor(t=NaN,e=[]){super(t,e)}get value(){return super.value}set value(t=NaN){super.value=Number(t)}reset(t=0){super.reset(t)}add(t=1){this.value+=t}subtract(t=1){this.value-=t}}class w extends m{constructor(t){super(),this.value=t,this.forceChangeEvent=!1}get value(){return this._value}set value(t){t!==this._value&&(this._deselectValue(this._value),this._selectValue(t)),super.value=t}toString(){return this.value.toString()}_deselectValue(t){t&&t.isSelected&&t.isSelected instanceof g&&(t.isSelected.value=!1)}_selectValue(t){t&&t.isSelected&&t.isSelected instanceof g&&(t.isSelected.value=!0)}}class f extends m{static get ITEM_CHANGE(){return"item-change"}constructor(){super(),this.dataItemChangeHandler=this.dataItemChangeHandler.bind(this),this.selectedItemChange=this.selectedItemChange.bind(this),this.selectedIndexChange=this.selectedIndexChange.bind(this),this.lastIndex=new y,this.length=new y,this.length.addEventListener(m.CHANGE,()=>{this.lastIndex.value=this.length.value-1}),this.length.value=arguments.length,this._value=[],this.selectedItem=new w,this.selectedItem.addEventListener(m.CHANGE,this.selectedItemChange),this.selectedIndex=new y,this.selectedIndex.addEventListener(m.CHANGE,this.selectedIndexChange),this.nextIndex=new y,this.prevIndex=new y,this.dataClass=Object,this.push.apply(this,arguments)}selectedItemChange(t){this.updateSelectedIndex(),this.setSelectedData(this.selectedItem.value)}updateSelectedIndex(){this.selectedIndex.removeEventListener(m.CHANGE,this.selectedIndexChange);const t=this.value.indexOf(this.selectedItem.value);this.selectedIndex.value=t,this.selectedIndex.addEventListener(m.CHANGE,this.selectedIndexChange)}setSelectedData(t){this.previousSelectedItem&&this.previousSelectedItem.isSelectedItem instanceof m&&(this.previousSelectedItem.isSelectedItem.value=!1),this.selectedData&&this.selectedData.copy(t),this.previousSelectedItem=t,this.previousSelectedItem&&this.previousSelectedItem.isSelectedItem instanceof m&&(this.previousSelectedItem.isSelectedItem.value=!0);const e=this.selectedIndex.value;let s=e+1;s>this.value.length-1&&(s=0),this.nextIndex.value=s,this.nextData&&this.nextData.copy(this.value[this.nextIndex.value]);let i=e-1;i<0&&(i=this.value.length-1),this.prevIndex.value=i,this.prevData&&this.prevData.copy(this.value[this.prevIndex.value])}selectedIndexChange(t){const e=this.selectedIndex.value;this.selectedItem.removeEventListener(m.CHANGE,this.selectedItemChange),this.selectedItem.value=this.value[e],this.selectedItem.addEventListener(m.CHANGE,this.selectedItemChange),this.setSelectedData(this.selectedItem.value)}clear(){return this.splice(0,this.value.length)}dataItemChangeHandler(t){const e=new d(f.ITEM_CHANGE,this.value);this.dispatchEvent(e)}item(t){return this._value[t]}get value(){return this._value}set value(t){t||(t=[]);for(let t=0;t<this._value.length;t++){const e=this._value[t];e instanceof m&&e.removeEventListener(m.CHANGE,this.dataItemChangeHandler)}const e=[0,this.value.length].concat(t);this.splice.apply(this,e);for(let t=0;t<this._value.length;t++){const e=this._value[t];e instanceof m&&e.addEventListener(m.CHANGE,this.dataItemChangeHandler)}this.length.value=this._value.length,p.dispatch(this,"value",this.value),this.dataItemChangeHandler(null),this.includes(this.selectedItem.value)?this.updateSelectedIndex():this.selectedItem.value=null}indexOf(t,e){return this._value.indexOf(t,e)}map(t){return this._value.map(t)}find(t){return this._value.find(t)}findByKey(t,e){return this.find(s=>s[t].toString()===e.toString())}filter(t){return this._value.filter(t)}pop(){const t=this._value.pop();t instanceof m&&t.removeEventListener(m.CHANGE,this.dataItemChangeHandler),this.length.value=this._value.length;const e=new d("remove",{value:[t],index:this.value.length,total:1});return this.dispatchEvent(e),t===this.selectedItem.value?this.selectedItem.value=null:this.updateSelectedIndex(),t}push(){const t=this.value.length,e=this._value.push.apply(this._value,arguments);this.length.value=e;const s=[];for(let t=0;t<arguments.length;t++)s.push(arguments[t]);for(let t=0;t<s.length;t++){const e=s[t];e instanceof m&&e.addEventListener(m.CHANGE,this.dataItemChangeHandler)}if(s.length>0){const e=new d("add",{value:s,index:t,total:arguments.length});this.dispatchEvent(e)}return e}reverse(){this._value.reverse();const t=new d("reverse",{value:this._value});this.dispatchEvent(t),this.updateSelectedIndex()}shift(){const t=this._value.shift();t instanceof m&&t.removeEventListener(m.CHANGE,this.dataItemChangeHandler),this.length.value=this._value.length;const e=new d("remove",{value:[t],index:0,total:1});return this.dispatchEvent(e),t===this.selectedItem.value?this.selectedItem.value=null:this.updateSelectedIndex(),t}swap(t,e){const s=this._value[t];this._value[t]=this._value[e],this._value[e]=s;const i=new d("sort",{value:this._value});this.dispatchEvent(i),this.updateSelectedIndex()}sort(t){this._value.sort(t);const e=new d("sort",{value:this._value});this.dispatchEvent(e),this.updateSelectedIndex()}splice(){const t=this._value.splice.apply(this._value,arguments);for(let e=0;e<t.length;e++){const s=t[e];s instanceof m&&s.removeEventListener(m.CHANGE,this.dataItemChangeHandler)}const e=[];for(let t=2;t<arguments.length;t++)e.push(arguments[t]);this.length.value=this._value.length;for(let t=0;t<e.length;t++){const s=e[t];s instanceof m&&s.addEventListener(m.CHANGE,this.dataItemChangeHandler)}const s=arguments[0];if(t.length>0){const e=new d("remove",{value:t,index:s,total:t.length});this.dispatchEvent(e)}if(e.length>0){const t=new d("add",{value:e,index:s,total:e.length});this.dispatchEvent(t)}return this.includes(this.selectedItem.value)?this.updateSelectedIndex():this.selectedItem.value=null,t}remove(t){const e=this.indexOf(t);-1!==e&&this.splice(e,1)}unshift(){const t=this._value.unshift.apply(this._value,arguments);this.length.value=t;const e=[];for(let t=0;t<arguments.length;t++)e.push(arguments[t]);for(let t=0;t<e.length;t++){const s=e[t];s instanceof m&&s.addEventListener(m.CHANGE,this.dataItemChangeHandler)}if(e.length>0){const t=new d("add",{value:e,index:0,total:arguments.length});this.dispatchEvent(t)}return this.updateSelectedIndex(),t}includes(t){return-1!==this.indexOf(t)}join(){return this._value.join.apply(this._value,arguments)}concat(){return this._value.concat.apply(this._value,arguments)}slice(){return this._value.slice.apply(this._value,arguments)}serialize(){const t=[];return this.forEach(e=>{t.push(e.serialize())}),t}deserialize(t){const e=[];t.forEach(t=>{const s=new this.dataClass;s.deserialize(t),e.push(s)}),this.value=e}toString(){return this.value.toString()}}function x(t=0){return isNaN(t)||t<=0?Promise.resolve():new Promise((function(e,s){setTimeout((function(){e()}),1e3*t)}))}class b extends v{constructor(t="",e=[]){super(t,e)}get value(){return super.value}set value(t=""){super.value=t.toString()}reset(t=""){super.reset(t)}}class _ extends EventTarget{constructor(t="Action",e="Action",s="Add an Action"){super(),this.capture=this.capture.bind(this),this.play=this.play.bind(this),this.reCapture=this.reCapture.bind(this),this.type=t,this.name=new b,this.name.addEventListener(m.CHANGE,()=>{this.name.length.value=Math.max(this.name.value.length,4)}),this.name.value=e,this.icon=new b,this.description=new b(s),this.captureDescription=new b,this.isTestable=new g,this.isCaptureable=new g,this.isCapturing=new g,this.changeCursorOnCapture=new g,this.isCapturing.addEventListener(m.CHANGE,t=>{this.changeCursorOnCapture.value&&(Ut.model.showCaptureIcon.value=t.data)}),this.isPlaying=new g,this.delay=new y(0),this.isSelectedItem=new g,this._array=[this]}get array(){return this._array}set array(t){this._array=t,this.dispatchEvent(new d("change_array",t))}clone(){}copy(t){t&&(this.delay.value=t.delay.value,this.isCaptureable.value=t.isCaptureable.value,this.isTestable.value=t.isTestable.value)}triggerDelay(){return x(this.delay.value).then(()=>this.trigger())}trigger(){return Promise.resolve()}serialize(){return{type:this.type,delay:this.delay.serialize(),name:this.name.serialize()}}deserialize(t){t&&(this.type=t.type,this.delay.deserialize(t.delay),this.name.deserialize(t.name))}capture(){this.isCapturing.value=!0}reCapture(){Object(i.a)("Action","reCapture",this.type),this.capture()}captureComplete(){this.isCapturing.value=!1,Ut.model.save()}captureAtInit(){}play(){return Object(i.a)("Action","play",this.type),this.isPlaying.value=!0,this.trigger().then(()=>{this.isPlaying.value=!1,Ut.model.save()})}}class E extends EventTarget{constructor(){super(),this.time=NaN,this.index=0,this.seconds=0,this.allFrames=0,this.animationFrame=this.animationFrame.bind(this)}static get TICK(){return"tick"}static get FPS(){return"fps"}start(){if(!this.isRunning)return this.isRunning=!0,window.requestAnimationFrame(this.animationFrame),this.fpsTimeout=setTimeout(this.dispatchFrameSeconds.bind(this),1e3),this}pause(){this.isRunning=!1,clearTimeout(this.fpsTimeout)}animationFrame(t){this.time=t,this.index++;const e=new d(E.TICK,this.time);this.dispatchEvent(e),this.isRunning&&window.requestAnimationFrame(this.animationFrame)}dispatchFrameSeconds(){this.allFrames+=this.index,this.seconds++;const t=new d(E.FPS,{frames:this.index,averageFrames:Math.round(this.allFrames/this.seconds*10)/10});this.dispatchEvent(t),this.index=0,setTimeout(this.dispatchFrameSeconds.bind(this),1e3)}}let C;function S(){return C||(C=(new E).start()),C}class z extends EventTarget{constructor(t=0,e=1,s=[],i=null,n=null,a="",r=!1){if(super(),t<0)throw new Error("Tween startTime must be greater than or equal to 0");if(e<=0)throw new Error("Tween duration must be greater than 0");this.tick=this.tick.bind(this),this._startTime=t,this._duration=e,this.name=a,this.debug=r,this.properties=s,this.updateHandler=i,this.completeHandler=n,this._tweenTime=NaN,this._time=NaN,this.forceUpdate=!1}get startTime(){return this._startTime}set startTime(t){this._startTime=t,this.dispatchEvent(new Event(z.CHANGE))}get endTime(){return this.startTime+this.duration}get duration(){return this._duration}set duration(t){this._duration=Object(n.i)(t,3),this.dispatchEvent(new Event(z.CHANGE))}start(t=0,e=null){this.clock=S(),this.stop(),e&&(this.updateHandler=e);const s=new Promise((t,e)=>{const s=e=>{this.removeEventListener(z.COMPLETE,s),t(this)};this.addEventListener(z.COMPLETE,s)});return this._tweenTime=NaN,this.time=t,this.previousTime=this.clock.time,this.clock.addEventListener(E.TICK,this.tick),s}tick(t){const e=this.clock.time;this.time+=(e-this.previousTime)/1e3,this.previousTime=e}pause(){this.clock.removeEventListener(E.TICK,this.tick)}resume(){this.previousTime=this.clock.time,this.clock.addEventListener(E.TICK,this.tick)}stop(){this.clock&&this.clock.removeEventListener(E.TICK,this.tick)}get time(){return this._time}set time(t){this._time=t;let e=t-this.startTime;if(e=Math.max(e,0),e=Math.min(e,this.duration),e!==this._tweenTime||this.forceUpdate){this._tweenTime=e,this.properties.forEach(t=>{t.calculate(e/this.duration,this.debug)});const t=new Event(z.UPDATE);this.updateHandler&&this.updateHandler(t),this.dispatchEvent(t)}if(e>=this.duration){const t=new Event(z.COMPLETE);this.completeHandler&&this.completeHandler(t),this.stop(),this.dispatchEvent(t)}}set timeFraction(t){this.time=t*this.duration}get timeFraction(){return this.time/this.duration}static get COMPLETE(){return"complete"}static get UPDATE(){return"update"}static get CHANGE(){return"change"}}class M{constructor(t,e,s,i,n,a,r=!1){this.target=t,this.name=e,this.startValue=s,this.endValue=i,this.ease=n,this.roundingFunc=a||this.noRounding,this.debug=r}calculate(t){let e=this.ease(t,this.startValue,this.endValue-this.startValue,1);e=this.roundingFunc(e),this.target[this.name]=e}noRounding(t){return t}}class T{constructor(t,e,s,i,n=100){this.p0=t||new a(0,0),this.p1=e||new a(0,0),this.p2=s||new a(1,1),this.p3=i||new a(1,1),this.samples=n,this.calculateLength()}clone(){return new T(this.p0.clone(),this.p1.clone(),this.p2.clone(),this.p3.clone(),this.samples)}calculateLength(){this.distances=[0],this.distancesX=[0],this.totalLength=0,this.totalX=0;let t=this.p0;for(let e=1;e<this.samples;e++){const s=e/(this.samples-1),i=this.getPoint(s),n=t.subtract(i);this.totalLength+=n.magnitude,this.distances[e]=this.totalLength,this.totalX-=n.x,this.distancesX[e]=this.totalX,t=i}}getPoint(t){const e=a.lerp(this.p0,this.p1,t),s=a.lerp(this.p1,this.p2,t),i=a.lerp(this.p2,this.p3,t),n=a.lerp(e,s,t),r=a.lerp(s,i,t);return a.lerp(n,r,t)}getPointOnCurve(t){const e=this.sampleAt(t,this.distances);return this.getPoint(e)}getPointAtX(t){const e=this.sampleAt(t,this.distancesX),s=this.getPoint(e);return s.x=t,s}sampleAt(t,e){let s=0;const i=e.length-1,n=t*e[i];let a,r=0,o=i;for(;r<=o;)if(s=Math.floor(r+(o-r)/2),a=e[s]-n,a<0)r=s+1;else{if(!(a>0)){o=s;break}o=s-1}if(s=o,e[s]===n)return s/i;const h=e[s];return(s+(n-h)/(e[s+1]-h))/i}}class H extends T{constructor(t=0,e=0,s=1,i=1,n=100){super(new a(0,0),new a(t,e),new a(s,i),new a(1,1),n),this.ease=this.ease.bind(this)}ease(t,e,s,i){return s*this.getPointAtX(t/i).y+e}clone(){return new H(this.p1.x,this.p1.y,this.p2.x,this.p1.y,this.samples)}}H.linear={ease:new H(0,0,1,1)},H.sine={easeInOut:new H(.37,0,.63,1),easeIn:new H(.12,0,.39,0),easeOut:new H(.61,1,.88,1)},H.quad={easeInOut:new H(.45,0,.55,1),easeIn:new H(.11,0,.5,0),easeOut:new H(.5,1,.89,1)},H.cubic={easeInOut:new H(.65,0,.35,1),easeIn:new H(.32,0,.67,0),easeOut:new H(.33,1,.68,1)},H.quart={easeInOut:new H(.76,0,.24,1),easeIn:new H(.5,0,.75,0),easeOut:new H(.25,1,.5,1)},H.quint={easeInOut:new H(.83,0,.17,1),easeIn:new H(.64,0,.78,0),easeOut:new H(.22,1,.36,1)},H.expo={easeInOut:new H(.87,0,.13,1),easeIn:new H(.7,0,.84,0),easeOut:new H(.16,1,.3,1)},H.back={easeInOut:new H(.68,-.6,.32,1.6),easeIn:new H(.36,0,.66,-.56),easeOut:new H(.34,1.56,.64,1)},H.circ={easeInOut:new H(.85,0,.15,1),easeIn:new H(.55,0,1,.45),easeOut:new H(0,.55,.45,1)};const L={};function P(t,e,s=!1){s&&console.log("getProperty path",t,"scope",e);let i=null;try{i=new Function("return "+t).bind(e)()}catch(t){}return i}function A(t,e){L[t]=e}const I=[function(t,e){let s=t.nodeName.toLowerCase(),i=L[s];if(i||(s=t.getAttribute("is"),s&&(i=L[s])),i){const e=new i(t);t.component=e}},function(t,e){t.component&&(t.component.scope=e)}];const k=[];for(let t=0;t<5;t++)k.push(document.createElement("div"));function N(t,e={},s=!1){let i;window.renderTemplate&&(t=window.renderTemplate(t,e));const n=k.shift();return k.push(n),n.innerHTML=t,n.children.length>0&&(i=n.children.item(0)),function(t,e){const s=O(t,[t]);for(let t=0;t<I.length;t++){const i=I[t];for(let t=s.length-1;t>-1;t--){i(s[t],e)}}}(i,e),i}function D(t){if(t){const e=O(t);for(let t=e.length-1;t>-1;t--){const s=e[t];if(s.component){if(s.component.destroy)try{s.component.destroy()}catch(t){}s.component=null}}if(t.innerHTML=null,t.parentNode&&t.parentNode.removeChild(t),t.component){if(t.component.destroy)try{t.component.destroy()}catch(t){}t.component=null}}}function O(t,e){if(e||(e=[]),t.children)for(let s=0;s<t.children.length;s++){const i=t.children.item(s);switch(i.nodeName){case"#text":case"#comment":case"BR":case"TEMPLATE":case"SCRIPT":break;default:e.push(i),O(i,e)}}return e}class R extends m{constructor(t={}){super(),this.changeHandler=this.changeHandler.bind(this);for(let e in t)this["_"+e]=t[e],Object.defineProperty(this,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]!=t&&(this["_"+e]=t,p.dispatch(this,e,t),this.changeHandler())},enumerable:!0,configurable:!0})}get value(){return this}changeHandler(){p.dispatch(this,"value",this)}destroy(){for(let t in this){let e=this[t];e instanceof m&&e.destroy(),this[t]=null}return super.destroy()}}class X extends R{constructor(t=0,e=0){super(),this.x=new y(t),this.x.addEventListener(m.CHANGE,this.changeHandler),this.y=new y(e),this.y.addEventListener(m.CHANGE,this.changeHandler)}destroy(){return this.x.removeEventListener(m.CHANGE,this.changeHandler),this.y.removeEventListener(m.CHANGE,this.changeHandler),super.destroy()}copy(t){t&&(this.x.copy(t.x),this.y.copy(t.y))}clone(){let t=new X;return t.copy(this),t}get point(){return new a(this.x.value,this.y.value)}serialize(){return{x:this.x.value,y:this.y.value}}deserialize(t){t&&(this.x.value=t.x,this.y.value=t.y)}}class F{constructor(){this.easeIn=this.easeIn.bind(this),this.easeOut=this.easeOut.bind(this),this.easeInOut=this.easeInOut.bind(this)}easeIn(t,e=0,s=1,i=1){}easeOut(t,e=0,s=1,i=1){}easeInOut(t,e=0,s=1,i=1){}}F.quad=new class extends F{easeIn(t,e=0,s=1,i=1){return s*(t/=i)*t+e}easeOut(t,e=0,s=1,i=1){return-s*(t/=i)*(t-2)+e}easeInOut(t,e=0,s=1,i=1){return(t/=i/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}},F.cubic=new class extends F{easeIn(t,e=0,s=1,i=1){return s*(t/=i)*t*t+e}easeOut(t,e=0,s=1,i=1){return s*((t=t/i-1)*t*t+1)+e}easeInOut(t,e=0,s=1,i=1){return(t/=i/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}},F.quart=new class extends F{easeIn(t,e=0,s=1,i=1){return s*(t/=i)*t*t*t+e}easeOut(t,e=0,s=1,i=1){return-s*((t=t/i-1)*t*t*t-1)+e}easeInOut(t,e=0,s=1,i=1){return(t/=i/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e}},F.quint=new class extends F{easeIn(t,e=0,s=1,i=1){return s*(t/=i)*t*t*t*t+e}easeOut(t,e=0,s=1,i=1){return s*((t=t/i-1)*t*t*t*t+1)+e}easeInOut(t,e=0,s=1,i=1){return(t/=i/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e}},F.sine=new class extends F{easeIn(t,e=0,s=1,i=1){return-s*Math.cos(t/i*(Math.PI/2))+s+e}easeOut(t,e=0,s=1,i=1){return s*Math.sin(t/i*(Math.PI/2))+e}easeInOut(t,e=0,s=1,i=1){return-s/2*(Math.cos(Math.PI*t/i)-1)+e}},F.expo=new class extends F{easeIn(t,e=0,s=1,i=1){return 0===t?e:s*Math.pow(2,10*(t/i-1))+e}easeOut(t,e=0,s=1,i=1){return t===i?e+s:s*(1-Math.pow(2,-10*t/i))+e}easeInOut(t,e=0,s=1,i=1){return 0===t?e:t===i?e+s:(t/=i/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(2-Math.pow(2,-10*--t))+e}},F.circ=new class extends F{easeIn(t,e=0,s=1,i=1){return-s*(Math.sqrt(1-(t/=i)*t)-1)+e}easeOut(t,e=0,s=1,i=1){return s*Math.sqrt(1-(t=t/i-1)*t)+e}easeInOut(t,e=0,s=1,i=1){return(t/=i/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},F.elastic=new class extends F{easeIn(t,e=0,s=1,i=1,n,a){if(0===t)return e;if(1==(t/=i))return e+s;let r;return a||(a=.3*i),!n||n<Math.abs(s)?(n=s,r=a/4):r=a/(2*Math.PI)*Math.asin(s/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/a)+e}easeOut(t,e=0,s=1,i=1,n,a){if(0===t)return e;if(1==(t/=i))return e+s;let r;return a||(a=.3*i),!n||n<Math.abs(s)?(n=s,r=a/4):r=a/(2*Math.PI)*Math.asin(s/n),n*Math.pow(2,-10*t)*Math.sin((t*i-r)*(2*Math.PI)/a)+s+e}easeInOut(t,e=0,s=1,i=1,n,a){if(0===t)return e;if(2==(t/=i/2))return e+s;let r;return a||(a=i*(.3*1.5)),!n||n<Math.abs(s)?(n=s,r=a/4):r=a/(2*Math.PI)*Math.asin(s/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/a)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/a)*.5+s+e}},F.back=new class extends F{constructor(t=1.70158){super(),this.s=t}easeIn(t,e=0,s=1,i=1,n){return void 0===n&&(n=this.s),s*(t/=i)*t*((n+1)*t-n)+e}easeOut(t,e=0,s=1,i=1,n){return void 0===n&&(n=this.s),s*((t=t/i-1)*t*((n+1)*t+n)+1)+e}easeInOut(t,e=0,s=1,i=1,n){return void 0===n&&(n=this.s),(t/=i/2)<1?s/2*(t*t*((1+(n*=1.525))*t-n))+e:s/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e}},F.bounce=new class extends F{easeOut(t,e=0,s=1,i=1){return(t/=i)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e}easeIn(t,e=0,s=1,i=1){return s-this.easeOut(i-t,0,s,i)+e}easeInOut(t,e=0,s=1,i=1){return t<i/2?.5*this.easeIn(2*t,0,s,i)+e:.5*this.easeOut(2*t-i,0,s,i)+.5*s+e}},F.linear=new class{constructor(){this.ease=this.ease.bind(this)}ease(t,e=0,s=1,i=1){return s*t/i+e}};class B extends R{constructor(){super(),this._value=this,this.p0=new X(0,0),this.p1=new X(0,0),this.p2=new X(1,1),this.p3=new X(1,1),this.p0.addEventListener("value",this.changeHandler),this.p1.addEventListener("value",this.changeHandler),this.p2.addEventListener("value",this.changeHandler),this.p3.addEventListener("value",this.changeHandler);for(let t=0;t<4;t++){let e=this["p"+t];e.x.modifiers=[n.g],e.y.modifiers=[n.g]}this.controlPoints=[this.p1,this.p2],this.controlPointsLines=[[this.p0,this.p1],[this.p3,this.p2]],this.easing=new H,this.debugEasing=F.quad.easeInOut,this.changeHandler()}copy(t){t&&(this.p0.copy(t.p0),this.p1.copy(t.p1),this.p2.copy(t.p2),this.p3.copy(t.p3))}changeHandler(){this.easing.p1.x=this.p1.x.value,this.easing.p1.y=this.p1.y.value,this.easing.p2.x=this.p2.x.value,this.easing.p2.y=this.p2.y.value,this.easing.calculateLength(),super.changeHandler()}}class Y extends _{constructor(t,e,s=0,i=0,n=1,r=0){super("ActionTween","ActionTween"),this.startX=new y(t),this.startY=new y(e),this.endX=new y(s),this.endY=new y(i),this.duration=new y(n),this.cubicBezierPoints=new B,this.easingPresets=new f,this.easingPresets.selectedItem.addEventListener(m.CHANGE,this.easingPresetChange.bind(this)),this.easingPresets.selectedItem.debug=!0;let o=["Select a preset"];for(let t in H){let e=H[t];for(let s in e){let e=t+"."+s;o.push(e)}}this.easingPresets.value=o,this.easingPresets.selectedItem.value="quad.easeInOut",this.tweenUpdateHandler=this.tweenUpdateHandler.bind(this),this.tweenCompleteHandler=this.tweenCompleteHandler.bind(this),this.pos=new a}resetEasing(){this.easingPresets.selectedItem.value=this.easingPresets.value[0]}easingPresetChange(){let t=this.easingPresets.selectedItem.value,e=P("this."+t,F);e&&(this.cubicBezierPoints.debugEasing=e);let s=P("this."+t,H);s&&(this.cubicBezierPoints.p1.x.value=s.p1.x,this.cubicBezierPoints.p1.y.value=s.p1.y,this.cubicBezierPoints.p2.x.value=s.p2.x,this.cubicBezierPoints.p2.y.value=s.p2.y)}copy(t){super.copy(t),this.startX.value=t.startX.value,this.startY.value=t.startY.value,this.endX.value=t.endX.value,this.endY.value=t.endY.value,this.duration.value=t.duration.value,this.cubicBezierPoints.copy(t.cubicBezierPoints)}trigger(){return this.tween=new z(0,this.duration.value,[new M(this.pos,"x",this.startX.value,this.endX.value,this.cubicBezierPoints.easing.ease),new M(this.pos,"y",this.startY.value,this.endY.value,this.cubicBezierPoints.easing.ease)]),this.tween.addEventListener(z.UPDATE,this.tweenUpdateHandler),this.tween.addEventListener(z.COMPLETE,this.tweenCompleteHandler),this.tween.start()}tweenUpdateHandler(t){}tweenCompleteHandler(t){}serialize(){let t=super.serialize();return t.startX=this.startX.serialize(),t.startY=this.startY.value,t.endX=this.endX.value,t.endY=this.endY.value,t.duration=this.duration.value,t.p1=this.cubicBezierPoints.p1.serialize(),t.p2=this.cubicBezierPoints.p2.serialize(),t.easing=this.easingPresets.selectedItem.value,t}deserialize(t){t&&(super.deserialize(t),this.startX.deserialize(t.startX),this.startY.deserialize(t.startY),this.endX.deserialize(t.endX),this.endY.deserialize(t.endY),this.duration.deserialize(t.duration),this.cubicBezierPoints.p1.deserialize(t.p1),this.cubicBezierPoints.p2.deserialize(t.p2),this.easingPresets.selectedItem.value=t.easing||"quad.easeInOut")}}class V extends Y{constructor(t="window",e="px",s=0,i=0,n=1,a=0){super(0,0,0,0,n,a),this.type="ActionScroll",this.name.value="Scroll",this.description.value="Add a scroll animation",this.target=new b(t),this.unitX=new y(s),this.unitY=new y(i),this.units=new f("%","px"),this.units.selectedItem.value=e,this.isCaptureable.value=!0,this.isTestable.value=!0,this.icon.value="fas fa-scroll",this.doScroll=this.doScroll.bind(this),this.unitX.addEventListener(m.CHANGE,this.doScroll),this.unitY.addEventListener(m.CHANGE,this.doScroll)}clone(){let t=new V;return t.copy(this),t}copy(t){this.unitX.removeEventListener(m.CHANGE,this.doScroll),this.unitY.removeEventListener(m.CHANGE,this.doScroll),super.copy(t),this.target.value=t.target.value,this.unitX.value=t.unitX.value,this.unitY.value=t.unitY.value,this.units.selectedItem.value=t.units.selectedItem.value,this.unitX.addEventListener(m.CHANGE,this.doScroll),this.unitY.addEventListener(m.CHANGE,this.doScroll)}trigger(){switch(this.target.value){case"window":this.startX.value=window.scrollX,this.startY.value=window.scrollY;break;default:let t=document.querySelector(this.target.value);this.startX.value=t.scrollLeft,this.startY.value=t.scrollTop}if("px"==this.units.selectedItem.value&&(this.endX.copy(this.unitX),this.endY.copy(this.unitY)),"%"==this.units.selectedItem.value){let t={x:0,y:0};switch(this.target.value){case"window":t.x=document.body.offsetWidth-window.innerWidth,t.y=document.body.offsetHeight-window.innerHeight;break;default:let e=document.querySelector(this.target.value);t.x=e.scrollWidth-e.clientWidth,t.y=e.scrollHeight-e.clientHeight}this.endX.value=Math.round(this.unitX.value/100*t.x),this.endY.value=Math.round(this.unitY.value/100*t.y)}return super.trigger()}doScroll(){this.pos.x=this.unitX.value,this.pos.y=this.unitY.value,this.tweenUpdateHandler()}tweenUpdateHandler(){switch(this.target.value){case"window":window.scroll(this.pos.x,this.pos.y);break;default:let t=document.querySelector(this.target.value);t.scrollLeft=this.pos.x,t.scrollTop=this.pos.y}}serialize(){let t=super.serialize();return t.target=this.target.serialize(),t.unitX=this.unitX.serialize(),t.unitY=this.unitY.serialize(),t.units=this.units.selectedItem.value,t}deserialize(t){t&&(this.unitX.removeEventListener(m.CHANGE,this.doScroll),this.unitY.removeEventListener(m.CHANGE,this.doScroll),super.deserialize(t),this.target.deserialize(t.target),this.unitX.deserialize(t.unitX),this.unitY.deserialize(t.unitY),this.units.selectedItem.value=t.units,this.unitX.addEventListener(m.CHANGE,this.doScroll),this.unitY.addEventListener(m.CHANGE,this.doScroll))}capture(){super.capture(),this.unitX.removeEventListener(m.CHANGE,this.doScroll),this.unitY.removeEventListener(m.CHANGE,this.doScroll);let t=new a,e=new a;switch(this.target.value){case"window":t.x=window.scrollX,t.y=window.scrollY,e.x=document.body.offsetWidth-window.innerWidth,e.y=document.body.offsetHeight-window.innerHeight;break;default:let s=document.querySelector(this.target.value);t.x=s.scrollLeft,t.y=s.scrollTop,e.x=s.scrollWidth-s.clientWidth,e.y=s.scrollHeight-s.clientHeight}let s=new a;switch(this.units.selectedItem.value){case"px":s.x=t.x,s.y=t.y;break;case"%":s.x=Math.round(t.x/e.x*100),s.y=Math.round(t.y/e.y*100)}isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),this.unitX.value=s.x,this.unitY.value=s.y,setTimeout(()=>{this.unitX.addEventListener(m.CHANGE,this.doScroll),this.unitY.addEventListener(m.CHANGE,this.doScroll),this.captureComplete()},200)}captureAtInit(){super.captureAtInit(),this.capture()}}class j extends _{constructor(t="click",e=0,s=0){super("ActionMouseEvent","MouseEvent","Add a mouse event"),this.x=new y(e),this.y=new y(s),this.eventTypes=new f("click","mousedown","mouseup","mouseover","mouseout","dblclick","mousemove","mouseenter","mouseleave","contextmenu","touchstart","touchmove","touchend"),this.eventTypes.selectedItem.value=this.eventTypes.value[0],this.isTestable.value=!0,this.isCaptureable.value=!0,this.changeCursorOnCapture.value=!0,this.captureMouseEventHandler=this.captureMouseEventHandler.bind(this),this.icon.value="fas fa-hand-pointer"}clone(){let t=new j;return t.copy(this),t}copy(t){super.copy(t),this.eventTypes.selectedItem.value=t.eventTypes.selectedItem.value,this.x.value=t.x.value,this.y.value=t.y.value}trigger(){let t=new a(this.x.value-window.scrollX,this.y.value-window.scrollY),e=document.elementFromPoint(t.x,t.y),s=new MouseEvent(this.eventTypes.selectedItem.value,{bubbles:!0,cancelable:!0,view:window,clientX:t.x,clientY:t.y,pageX:t.x,pageY:t.y,x:t.x,y:t.y});return e?e.dispatchEvent(s):console.log("MouseEvent action cannot find element at pageX "+this.x.value+" and pageY "+this.y.value),Promise.resolve()}serialize(){let t=super.serialize();return t.eventType=this.eventTypes.selectedItem.value,t.x=this.x.value,t.y=this.y.value,t}deserialize(t){t&&(super.deserialize(t),this.eventTypes.selectedItem.value=t.eventType,this.x.deserialize(t.x),this.y.deserialize(t.y))}capture(){super.capture(),setTimeout(()=>{document.body.addEventListener("click",this.captureMouseEventHandler)},33)}captureMouseEventHandler(t){let e=t;h&&(e=t.touches[0]);let s=new a(e.pageX,e.pageY);this.x.value=s.x,this.y.value=s.y,document.body.removeEventListener("click",this.captureMouseEventHandler),this.captureComplete()}captureAtInit(){super.captureAtInit(),this.capture()}}class q extends _{constructor(t=""){super("ActionEval","Javascript","Add javascript code"),t||(t='/* Example */\nlet promise = new Promise(function(resolve, reject) {\n    console.log("Wait for 1 second");\n    setTimeout(function() {\n        resolve();\n    }, 1000);\n});\nreturn promise.then(function() {\n    console.log("1 second has passed");\n});\n'),this.code=new b(t),this.icon.value="fab fa-js-square",this.isTestable.value=!0}clone(){let t=new q;return t.copy(this),t}copy(t){this.code.value=t.code.value}trigger(){let t=this.code.value,e=new Function(t)();return e instanceof Promise||(e=Promise.resolve()),e}serialize(){let t=super.serialize();return t.code=encodeURIComponent(this.code.value),t}deserialize(t){t&&(super.deserialize(t),this.code.value=decodeURIComponent(t.code))}}for(var G=[],U=0;U<256;U++)G[U]=(U<16?"0":"")+U.toString(16);var W={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,s=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(G[255&t]+G[t>>8&255]+G[t>>16&255]+G[t>>24&255]+"-"+G[255&e]+G[e>>8&255]+"-"+G[e>>16&15|64]+G[e>>24&255]+"-"+G[63&s|128]+G[s>>8&255]+"-"+G[s>>16&255]+G[s>>24&255]+G[255&i]+G[i>>8&255]+G[i>>16&255]+G[i>>24&255]).toUpperCase()},clamp:function(t,e,s){return Math.max(e,Math.min(s,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,s,i,n){return i+(t-e)*(n-i)/(s-e)},lerp:function(t,e,s){return(1-s)*t+s*e},smoothstep:function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*(3-2*t)},smootherstep:function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*W.DEG2RAD},radToDeg:function(t){return t*W.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,s,i,n){var a=Math.cos,r=Math.sin,o=a(s/2),h=r(s/2),l=a((e+i)/2),c=r((e+i)/2),u=a((e-i)/2),d=r((e-i)/2),p=a((i-e)/2),m=r((i-e)/2);"XYX"===n?t.set(o*c,h*u,h*d,o*l):"YZY"===n?t.set(h*d,o*c,h*u,o*l):"ZXZ"===n?t.set(h*u,h*d,o*c,o*l):"XZX"===n?t.set(o*c,h*m,h*p,o*l):"YXY"===n?t.set(h*p,o*c,h*m,o*l):"ZYZ"===n?t.set(h*m,h*p,o*c,o*l):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function Z(t,e,s,i){this._x=t||0,this._y=e||0,this._z=s||0,this._w=void 0!==i?i:1}Object.assign(Z,{slerp:function(t,e,s,i){return s.copy(t).slerp(e,i)},slerpFlat:function(t,e,s,i,n,a,r){var o=s[i+0],h=s[i+1],l=s[i+2],c=s[i+3],u=n[a+0],d=n[a+1],p=n[a+2],m=n[a+3];if(c!==m||o!==u||h!==d||l!==p){var v=1-r,g=o*u+h*d+l*p+c*m,y=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){var f=Math.sqrt(w),x=Math.atan2(f,g*y);v=Math.sin(v*x)/f,r=Math.sin(r*x)/f}var b=r*y;if(o=o*v+u*b,h=h*v+d*b,l=l*v+p*b,c=c*v+m*b,v===1-r){var _=1/Math.sqrt(o*o+h*h+l*l+c*c);o*=_,h*=_,l*=_,c*=_}}t[e]=o,t[e+1]=h,t[e+2]=l,t[e+3]=c}}),Object.defineProperties(Z.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Z.prototype,{isQuaternion:!0,set:function(t,e,s,i){return this._x=t,this._y=e,this._z=s,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,i=t._y,n=t._z,a=t.order,r=Math.cos,o=Math.sin,h=r(s/2),l=r(i/2),c=r(n/2),u=o(s/2),d=o(i/2),p=o(n/2);return"XYZ"===a?(this._x=u*l*c+h*d*p,this._y=h*d*c-u*l*p,this._z=h*l*p+u*d*c,this._w=h*l*c-u*d*p):"YXZ"===a?(this._x=u*l*c+h*d*p,this._y=h*d*c-u*l*p,this._z=h*l*p-u*d*c,this._w=h*l*c+u*d*p):"ZXY"===a?(this._x=u*l*c-h*d*p,this._y=h*d*c+u*l*p,this._z=h*l*p+u*d*c,this._w=h*l*c-u*d*p):"ZYX"===a?(this._x=u*l*c-h*d*p,this._y=h*d*c+u*l*p,this._z=h*l*p-u*d*c,this._w=h*l*c+u*d*p):"YZX"===a?(this._x=u*l*c+h*d*p,this._y=h*d*c+u*l*p,this._z=h*l*p-u*d*c,this._w=h*l*c-u*d*p):"XZY"===a&&(this._x=u*l*c-h*d*p,this._y=h*d*c-u*l*p,this._z=h*l*p+u*d*c,this._w=h*l*c+u*d*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var s=e/2,i=Math.sin(s);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(s),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,s=t.elements,i=s[0],n=s[4],a=s[8],r=s[1],o=s[5],h=s[9],l=s[2],c=s[6],u=s[10],d=i+o+u;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(c-h)*e,this._y=(a-l)*e,this._z=(r-n)*e):i>o&&i>u?(e=2*Math.sqrt(1+i-o-u),this._w=(c-h)/e,this._x=.25*e,this._y=(n+r)/e,this._z=(a+l)/e):o>u?(e=2*Math.sqrt(1+o-i-u),this._w=(a-l)/e,this._x=(n+r)/e,this._y=.25*e,this._z=(h+c)/e):(e=2*Math.sqrt(1+u-i-o),this._w=(r-n)/e,this._x=(a+l)/e,this._y=(h+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var s=t.dot(e)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(W.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var s=this.angleTo(t);if(0===s)return this;var i=Math.min(1,e/s);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var s=t._x,i=t._y,n=t._z,a=t._w,r=e._x,o=e._y,h=e._z,l=e._w;return this._x=s*l+a*r+i*h-n*o,this._y=i*l+a*o+n*r-s*h,this._z=n*l+a*h+s*o-i*r,this._w=a*l-s*r-i*o-n*h,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var s=this._x,i=this._y,n=this._z,a=this._w,r=a*t._w+s*t._x+i*t._y+n*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=a,this._x=s,this._y=i,this._z=n,this;var o=1-r*r;if(o<=Number.EPSILON){var h=1-e;return this._w=h*a+e*this._w,this._x=h*s+e*this._x,this._y=h*i+e*this._y,this._z=h*n+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(o),c=Math.atan2(l,r),u=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=a*u+this._w*d,this._x=s*u+this._x*d,this._y=i*u+this._y*d,this._z=n*u+this._z*d,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Q=new J,$=new Z;function J(t,e,s){this.x=t||0,this.y=e||0,this.z=s||0}Object.assign(J.prototype,{isVector3:!0,set:function(t,e,s){return this.x=t,this.y=e,this.z=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion($.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,s=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[3]*s+n[6]*i,this.y=n[1]*e+n[4]*s+n[7]*i,this.z=n[2]*e+n[5]*s+n[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,s=this.y,i=this.z,n=t.elements,a=1/(n[3]*e+n[7]*s+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*s+n[8]*i+n[12])*a,this.y=(n[1]*e+n[5]*s+n[9]*i+n[13])*a,this.z=(n[2]*e+n[6]*s+n[10]*i+n[14])*a,this},applyQuaternion:function(t){var e=this.x,s=this.y,i=this.z,n=t.x,a=t.y,r=t.z,o=t.w,h=o*e+a*i-r*s,l=o*s+r*e-n*i,c=o*i+n*s-a*e,u=-n*e-a*s-r*i;return this.x=h*o+u*-n+l*-r-c*-a,this.y=l*o+u*-a+c*-n-h*-r,this.z=c*o+u*-r+h*-a-l*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,s=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[4]*s+n[8]*i,this.y=n[1]*e+n[5]*s+n[9]*i,this.z=n[2]*e+n[6]*s+n[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,s){return this.subVectors(e,t).multiplyScalar(s).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var s=t.x,i=t.y,n=t.z,a=e.x,r=e.y,o=e.z;return this.x=i*o-n*r,this.y=n*a-s*o,this.z=s*r-i*a,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var s=t.dot(this)/e;return this.copy(t).multiplyScalar(s)},projectOnPlane:function(t){return Q.copy(this).projectOnVector(t),this.sub(Q)},reflect:function(t){return this.sub(Q.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var s=this.dot(t)/e;return Math.acos(W.clamp(s,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,s=this.y-t.y,i=this.z-t.z;return e*e+s*s+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,s){var i=Math.sin(e)*t;return this.x=i*Math.sin(s),this.y=Math.cos(e)*t,this.z=i*Math.cos(s),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var K=new J,tt=new rt,et=new J(0,0,0),st=new J(1,1,1),it=new J,nt=new J,at=new J;function rt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ot(){this.type="Curve",this.arcLengthDivisions=200}function ht(){var t=0,e=0,s=0,i=0;function n(n,a,r,o){t=n,e=r,s=-3*n+3*a-2*r-o,i=2*n-2*a+r+o}return{initCatmullRom:function(t,e,s,i,a){n(e,s,a*(s-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,s,i,a,r,o){var h=(e-t)/a-(s-t)/(a+r)+(s-e)/r,l=(s-e)/r-(i-e)/(r+o)+(i-s)/o;n(e,s,h*=r,l*=r)},calc:function(n){var a=n*n;return t+e*n+s*a+i*(a*n)}}}Object.assign(rt.prototype,{isMatrix4:!0,set:function(t,e,s,i,n,a,r,o,h,l,c,u,d,p,m,v){var g=this.elements;return g[0]=t,g[4]=e,g[8]=s,g[12]=i,g[1]=n,g[5]=a,g[9]=r,g[13]=o,g[2]=h,g[6]=l,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=m,g[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new rt).fromArray(this.elements)},copy:function(t){var e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this},copyPosition:function(t){var e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this},extractBasis:function(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,s=t.elements,i=1/K.setFromMatrixColumn(t,0).length(),n=1/K.setFromMatrixColumn(t,1).length(),a=1/K.setFromMatrixColumn(t,2).length();return e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=0,e[4]=s[4]*n,e[5]=s[5]*n,e[6]=s[6]*n,e[7]=0,e[8]=s[8]*a,e[9]=s[9]*a,e[10]=s[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,s=t.x,i=t.y,n=t.z,a=Math.cos(s),r=Math.sin(s),o=Math.cos(i),h=Math.sin(i),l=Math.cos(n),c=Math.sin(n);if("XYZ"===t.order){var u=a*l,d=a*c,p=r*l,m=r*c;e[0]=o*l,e[4]=-o*c,e[8]=h,e[1]=d+p*h,e[5]=u-m*h,e[9]=-r*o,e[2]=m-u*h,e[6]=p+d*h,e[10]=a*o}else if("YXZ"===t.order){var v=o*l,g=o*c,y=h*l,w=h*c;e[0]=v+w*r,e[4]=y*r-g,e[8]=a*h,e[1]=a*c,e[5]=a*l,e[9]=-r,e[2]=g*r-y,e[6]=w+v*r,e[10]=a*o}else if("ZXY"===t.order){v=o*l,g=o*c,y=h*l,w=h*c;e[0]=v-w*r,e[4]=-a*c,e[8]=y+g*r,e[1]=g+y*r,e[5]=a*l,e[9]=w-v*r,e[2]=-a*h,e[6]=r,e[10]=a*o}else if("ZYX"===t.order){u=a*l,d=a*c,p=r*l,m=r*c;e[0]=o*l,e[4]=p*h-d,e[8]=u*h+m,e[1]=o*c,e[5]=m*h+u,e[9]=d*h-p,e[2]=-h,e[6]=r*o,e[10]=a*o}else if("YZX"===t.order){var f=a*o,x=a*h,b=r*o,_=r*h;e[0]=o*l,e[4]=_-f*c,e[8]=b*c+x,e[1]=c,e[5]=a*l,e[9]=-r*l,e[2]=-h*l,e[6]=x*c+b,e[10]=f-_*c}else if("XZY"===t.order){f=a*o,x=a*h,b=r*o,_=r*h;e[0]=o*l,e[4]=-c,e[8]=h*l,e[1]=f*c+_,e[5]=a*l,e[9]=x*c-b,e[2]=b*c-x,e[6]=r*l,e[10]=_*c+f}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(et,t,st)},lookAt:function(t,e,s){var i=this.elements;return at.subVectors(t,e),0===at.lengthSq()&&(at.z=1),at.normalize(),it.crossVectors(s,at),0===it.lengthSq()&&(1===Math.abs(s.z)?at.x+=1e-4:at.z+=1e-4,at.normalize(),it.crossVectors(s,at)),it.normalize(),nt.crossVectors(at,it),i[0]=it.x,i[4]=nt.x,i[8]=at.x,i[1]=it.y,i[5]=nt.y,i[9]=at.y,i[2]=it.z,i[6]=nt.z,i[10]=at.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var s=t.elements,i=e.elements,n=this.elements,a=s[0],r=s[4],o=s[8],h=s[12],l=s[1],c=s[5],u=s[9],d=s[13],p=s[2],m=s[6],v=s[10],g=s[14],y=s[3],w=s[7],f=s[11],x=s[15],b=i[0],_=i[4],E=i[8],C=i[12],S=i[1],z=i[5],M=i[9],T=i[13],H=i[2],L=i[6],P=i[10],A=i[14],I=i[3],k=i[7],N=i[11],D=i[15];return n[0]=a*b+r*S+o*H+h*I,n[4]=a*_+r*z+o*L+h*k,n[8]=a*E+r*M+o*P+h*N,n[12]=a*C+r*T+o*A+h*D,n[1]=l*b+c*S+u*H+d*I,n[5]=l*_+c*z+u*L+d*k,n[9]=l*E+c*M+u*P+d*N,n[13]=l*C+c*T+u*A+d*D,n[2]=p*b+m*S+v*H+g*I,n[6]=p*_+m*z+v*L+g*k,n[10]=p*E+m*M+v*P+g*N,n[14]=p*C+m*T+v*A+g*D,n[3]=y*b+w*S+f*H+x*I,n[7]=y*_+w*z+f*L+x*k,n[11]=y*E+w*M+f*P+x*N,n[15]=y*C+w*T+f*A+x*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],s=t[4],i=t[8],n=t[12],a=t[1],r=t[5],o=t[9],h=t[13],l=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+n*o*c-i*h*c-n*r*u+s*h*u+i*r*d-s*o*d)+t[7]*(+e*o*d-e*h*u+n*a*u-i*a*d+i*h*l-n*o*l)+t[11]*(+e*h*c-e*r*d-n*a*c+s*a*d+n*r*l-s*h*l)+t[15]*(-i*r*l-e*o*c+e*r*u+i*a*c-s*a*u+s*o*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,s){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=s),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var s=this.elements,i=t.elements,n=i[0],a=i[1],r=i[2],o=i[3],h=i[4],l=i[5],c=i[6],u=i[7],d=i[8],p=i[9],m=i[10],v=i[11],g=i[12],y=i[13],w=i[14],f=i[15],x=p*w*u-y*m*u+y*c*v-l*w*v-p*c*f+l*m*f,b=g*m*u-d*w*u-g*c*v+h*w*v+d*c*f-h*m*f,_=d*y*u-g*p*u+g*l*v-h*y*v-d*l*f+h*p*f,E=g*p*c-d*y*c-g*l*m+h*y*m+d*l*w-h*p*w,C=n*x+a*b+r*_+o*E;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var S=1/C;return s[0]=x*S,s[1]=(y*m*o-p*w*o-y*r*v+a*w*v+p*r*f-a*m*f)*S,s[2]=(l*w*o-y*c*o+y*r*u-a*w*u-l*r*f+a*c*f)*S,s[3]=(p*c*o-l*m*o-p*r*u+a*m*u+l*r*v-a*c*v)*S,s[4]=b*S,s[5]=(d*w*o-g*m*o+g*r*v-n*w*v-d*r*f+n*m*f)*S,s[6]=(g*c*o-h*w*o-g*r*u+n*w*u+h*r*f-n*c*f)*S,s[7]=(h*m*o-d*c*o+d*r*u-n*m*u-h*r*v+n*c*v)*S,s[8]=_*S,s[9]=(g*p*o-d*y*o-g*a*v+n*y*v+d*a*f-n*p*f)*S,s[10]=(h*y*o-g*l*o+g*a*u-n*y*u-h*a*f+n*l*f)*S,s[11]=(d*l*o-h*p*o-d*a*u+n*p*u+h*a*v-n*l*v)*S,s[12]=E*S,s[13]=(d*y*r-g*p*r+g*a*m-n*y*m-d*a*w+n*p*w)*S,s[14]=(g*l*r-h*y*r-g*a*c+n*y*c+h*a*w-n*l*w)*S,s[15]=(h*p*r-d*l*r+d*a*c-n*p*c-h*a*m+n*l*m)*S,this},scale:function(t){var e=this.elements,s=t.x,i=t.y,n=t.z;return e[0]*=s,e[4]*=i,e[8]*=n,e[1]*=s,e[5]*=i,e[9]*=n,e[2]*=s,e[6]*=i,e[10]*=n,e[3]*=s,e[7]*=i,e[11]*=n,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,i))},makeTranslation:function(t,e,s){return this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var s=Math.cos(e),i=Math.sin(e),n=1-s,a=t.x,r=t.y,o=t.z,h=n*a,l=n*r;return this.set(h*a+s,h*r-i*o,h*o+i*r,0,h*r+i*o,l*r+s,l*o-i*a,0,h*o-i*r,l*o+i*a,n*o*o+s,0,0,0,0,1),this},makeScale:function(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this},makeShear:function(t,e,s){return this.set(1,e,s,0,t,1,s,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,s){var i=this.elements,n=e._x,a=e._y,r=e._z,o=e._w,h=n+n,l=a+a,c=r+r,u=n*h,d=n*l,p=n*c,m=a*l,v=a*c,g=r*c,y=o*h,w=o*l,f=o*c,x=s.x,b=s.y,_=s.z;return i[0]=(1-(m+g))*x,i[1]=(d+f)*x,i[2]=(p-w)*x,i[3]=0,i[4]=(d-f)*b,i[5]=(1-(u+g))*b,i[6]=(v+y)*b,i[7]=0,i[8]=(p+w)*_,i[9]=(v-y)*_,i[10]=(1-(u+m))*_,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,s){var i=this.elements,n=K.set(i[0],i[1],i[2]).length(),a=K.set(i[4],i[5],i[6]).length(),r=K.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),t.x=i[12],t.y=i[13],t.z=i[14],tt.copy(this);var o=1/n,h=1/a,l=1/r;return tt.elements[0]*=o,tt.elements[1]*=o,tt.elements[2]*=o,tt.elements[4]*=h,tt.elements[5]*=h,tt.elements[6]*=h,tt.elements[8]*=l,tt.elements[9]*=l,tt.elements[10]*=l,e.setFromRotationMatrix(tt),s.x=n,s.y=a,s.z=r,this},makePerspective:function(t,e,s,i,n,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var r=this.elements,o=2*n/(e-t),h=2*n/(s-i),l=(e+t)/(e-t),c=(s+i)/(s-i),u=-(a+n)/(a-n),d=-2*a*n/(a-n);return r[0]=o,r[4]=0,r[8]=l,r[12]=0,r[1]=0,r[5]=h,r[9]=c,r[13]=0,r[2]=0,r[6]=0,r[10]=u,r[14]=d,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this},makeOrthographic:function(t,e,s,i,n,a){var r=this.elements,o=1/(e-t),h=1/(s-i),l=1/(a-n),c=(e+t)*o,u=(s+i)*h,d=(a+n)*l;return r[0]=2*o,r[4]=0,r[8]=0,r[12]=-c,r[1]=0,r[5]=2*h,r[9]=0,r[13]=-u,r[2]=0,r[6]=0,r[10]=-2*l,r[14]=-d,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this},equals:function(t){for(var e=this.elements,s=t.elements,i=0;i<16;i++)if(e[i]!==s[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var s=0;s<16;s++)this.elements[s]=t[s+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}),Object.assign(ot.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var s=this.getUtoTmapping(t);return this.getPoint(s,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],s=0;s<=t;s++)e.push(this.getPoint(s/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],s=0;s<=t;s++)e.push(this.getPointAt(s/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,s,i=[],n=this.getPoint(0),a=0;for(i.push(0),s=1;s<=t;s++)a+=(e=this.getPoint(s/t)).distanceTo(n),i.push(a),n=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var s,i=this.getLengths(),n=0,a=i.length;s=e||t*i[a-1];for(var r,o=0,h=a-1;o<=h;)if((r=i[n=Math.floor(o+(h-o)/2)]-s)<0)o=n+1;else{if(!(r>0)){h=n;break}h=n-1}if(i[n=h]===s)return n/(a-1);var l=i[n];return(n+(s-l)/(i[n+1]-l))/(a-1)},getTangent:function(t){var e=t-1e-4,s=t+1e-4;e<0&&(e=0),s>1&&(s=1);var i=this.getPoint(e);return this.getPoint(s).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var s,i,n,a=new J,r=[],o=[],h=[],l=new J,c=new rt;for(s=0;s<=t;s++)i=s/t,r[s]=this.getTangentAt(i),r[s].normalize();o[0]=new J,h[0]=new J;var u=Number.MAX_VALUE,d=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);for(d<=u&&(u=d,a.set(1,0,0)),p<=u&&(u=p,a.set(0,1,0)),m<=u&&a.set(0,0,1),l.crossVectors(r[0],a).normalize(),o[0].crossVectors(r[0],l),h[0].crossVectors(r[0],o[0]),s=1;s<=t;s++)o[s]=o[s-1].clone(),h[s]=h[s-1].clone(),l.crossVectors(r[s-1],r[s]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(W.clamp(r[s-1].dot(r[s]),-1,1)),o[s].applyMatrix4(c.makeRotationAxis(l,n))),h[s].crossVectors(r[s],o[s]);if(!0===e)for(n=Math.acos(W.clamp(o[0].dot(o[t]),-1,1)),n/=t,r[0].dot(l.crossVectors(o[0],o[t]))>0&&(n=-n),s=1;s<=t;s++)o[s].applyMatrix4(c.makeRotationAxis(r[s],n*s)),h[s].crossVectors(r[s],o[s]);return{tangents:r,normals:o,binormals:h}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});var lt=new J,ct=new ht,ut=new ht,dt=new ht;function pt(t,e,s,i){ot.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=s||"centripetal",this.tension=i||.5}pt.prototype=Object.create(ot.prototype),pt.prototype.constructor=pt,pt.prototype.isCatmullRomCurve3=!0,pt.prototype.getPoint=function(t,e){var s,i,n,a,r=e||new J,o=this.points,h=o.length,l=(h-(this.closed?0:1))*t,c=Math.floor(l),u=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/h)+1)*h:0===u&&c===h-1&&(c=h-2,u=1),this.closed||c>0?s=o[(c-1)%h]:(lt.subVectors(o[0],o[1]).add(o[0]),s=lt),i=o[c%h],n=o[(c+1)%h],this.closed||c+2<h?a=o[(c+2)%h]:(lt.subVectors(o[h-1],o[h-2]).add(o[h-1]),a=lt),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(s.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(n),d),v=Math.pow(n.distanceToSquared(a),d);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),ct.initNonuniformCatmullRom(s.x,i.x,n.x,a.x,p,m,v),ut.initNonuniformCatmullRom(s.y,i.y,n.y,a.y,p,m,v),dt.initNonuniformCatmullRom(s.z,i.z,n.z,a.z,p,m,v)}else"catmullrom"===this.curveType&&(ct.initCatmullRom(s.x,i.x,n.x,a.x,this.tension),ut.initCatmullRom(s.y,i.y,n.y,a.y,this.tension),dt.initCatmullRom(s.z,i.z,n.z,a.z,this.tension));return r.set(ct.calc(u),ut.calc(u),dt.calc(u)),r},pt.prototype.copy=function(t){ot.prototype.copy.call(this,t),this.points=[];for(var e=0,s=t.points.length;e<s;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},pt.prototype.toJSON=function(){var t=ot.prototype.toJSON.call(this);t.points=[];for(var e=0,s=this.points.length;e<s;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},pt.prototype.fromJSON=function(t){ot.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,s=t.points.length;e<s;e++){var i=t.points[e];this.points.push((new J).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};class mt extends Y{constructor(t=[],e=1,s=0){for(super(0,0,0,0,e,s),this.type="ActionSwipe",this.name.value="Mouse gesture",this.description.value="Add a mouse gesture",this.points=new f,this.points.dataClass=X;t.length<2;)t.push(new X);this.points.value=t,this.isCaptureable.value=!0,this.isTestable.value=!0,this.smoothness=new y(20),this.changeCursorOnCapture.value=!0,this.icon.value="fas fa-arrows-alt",this.captureDownHandler=this.captureDownHandler.bind(this),this.captureMoveHandler=this.captureMoveHandler.bind(this),this.captureUpHandler=this.captureUpHandler.bind(this)}clone(){let t=new mt;return t.copy(this),t}copy(t){super.copy(t);let e=[];t.points.map(t=>{e.push(t.clone())}),this.points.value=e}serialize(){let t=super.serialize();return t.points=this.points.serialize(),t}deserialize(t){t&&(super.deserialize(t),this.points.deserialize(t.points))}trigger(){this.startX.value=0,this.startY.value=0,this.endX.value=1,this.endY.value=0;let t=[];return this.points.map(e=>{t.push(new J(e.x.value,e.y.value,0))}),this.curve=new pt(t,!1,"chordal",.75),this.dispatchMouseEvent("mousedown",0),super.trigger()}dispatchMouseEvent(t,e){e=Math.min(e,1),e=Math.max(e,0);let s=this.curve.getPoint(e);s.x=s.x-window.scrollX,s.y=s.y-window.scrollY;let i=document.elementFromPoint(s.x,s.y),n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,clientX:s.x,clientY:s.y,pageX:s.x,pageY:s.y,x:s.x,y:s.y});i.dispatchEvent(n)}tweenUpdateHandler(){this.dispatchMouseEvent("mousemove",this.pos.x)}tweenCompleteHandler(t){this.dispatchMouseEvent("mouseup",1)}capture(){super.capture(),document.body.addEventListener(c.mousedown,this.captureDownHandler)}captureDownHandler(t){let e=t;h&&(e=t.touches[0]);let s=new a(e.pageX,e.pageY);this.capturedPoints=[new X(s.x,s.y)],this.lastPoint=s,this.startDate=new Date,document.body.removeEventListener(c.mousedown,this.captureDownHandler),document.body.addEventListener(c.mousemove,this.captureMoveHandler),document.body.addEventListener(c.mouseup,this.captureUpHandler)}captureMoveHandler(t){let e=t;h&&(e=t.touches[0]);let s=new a(e.pageX,e.pageY);a.distance(this.lastPoint,s)>this.smoothness.value&&(this.lastPoint=s,this.capturedPoints.push(new X(s.x,s.y)))}captureUpHandler(t){let e=t;h&&(e=t.touches[0]);let s=new a(e.pageX,e.pageY);a.distance(this.lastPoint,s)>0&&this.capturedPoints.push(new X(s.x,s.y)),this.points.value=this.capturedPoints,this.capturedPoints=[];let i=Object(n.i)((new Date-this.startDate)/1e3,1);this.duration.value=i,document.body.removeEventListener(c.mousemove,this.captureMoveHandler),document.body.removeEventListener(c.mouseup,this.captureUpHandler),this.captureComplete()}captureAtInit(){super.captureAtInit(),this.capture()}}class vt extends _{constructor(){super("ActionWait","Pause","Add a pause"),this.delay.value=1,this.icon.value="fas fa-pause-circle"}clone(){let t=new vt;return t.copy(this),t}}class gt extends f{constructor(){super(),this.push.apply(this,arguments),this.types=new f,this.types.value=[new V,new j,new mt,new q,new vt]}cloneAction(t){let e=t.clone();this.addAction(e)}addAction(t){if(!t)return;Object(i.a)("Action","add",t.type),t.captureAtInit();let e=this.selectedIndex.value+1;isNaN(e)&&(e=this.value.length),this.splice(e,0,t),this.selectedIndex.value=e}removeAction(t){Object(i.a)("Action","remove",t.type);let e=this.indexOf(t);this.remove(t);let s=Math.max(e-1,0);this.selectedIndex.value=Math.min(s,this.value.length-1)}serialize(){let t=[];return this.map(e=>{t.push(e.serialize())}),t}deserialize(t){if(!t)return;let e=[];for(let s=0;s<t.length;s++){let i=t[s],n=this.types.find(t=>t.type==i.type).clone();n.deserialize(i),e.push(n)}this.value=e}}class yt{constructor(t,e=500){this.callback=t,this.timeout=e,this.throttle=this.throttle.bind(this),this.timeoutComplete=this.timeoutComplete.bind(this),this.isWaiting=!1,this.doCallback=!1}throttle(t){this.data=t,this.doCallback=!0,this.isWaiting||this.timeoutComplete()}timeoutComplete(){this.doCallback?(this.isWaiting=!0,this.callback(this.data),this.doCallback=!1,setTimeout(this.timeoutComplete,this.timeout)):this.isWaiting=!1}}class wt{constructor(){this.darkModeChangeHandler=this.darkModeChangeHandler.bind(this),this.position=new X(50,50),this.windowSizeChangeHandler=this.windowSizeChangeHandler.bind(this),this.windowResizeHandler=this.windowResizeHandler.bind(this),this.windowSize=new X(window.innerWidth,window.innerHeight),this.windowSize.addEventListener(m.CHANGE,this.windowSizeChangeHandler),window.addEventListener("resize",this.windowResizeHandler),this.videoBitsPerSecondThrottle=new yt(()=>{Object(i.a)("settings","videoBitsPerSecond",this.videoBitsPerSecond.value)},1e3),this.videoBitsPerSecondMin=1,this.videoBitsPerSecondMax=8,this.videoBitsPerSecond=new y,this.videoBitsPerSecond.value=8,this.videoBitsPerSecond.addEventListener(m.CHANGE,this.videoBitsPerSecondThrottle.throttle),this.videoCodecs=new f("vp8","vp9","h264"),this.videoCodecs.selectedItem.value=this.videoCodecs.value[0],this.videoCodecs.selectedItem.addEventListener(m.CHANGE,()=>{Object(i.a)("settings","videoCodec",this.videoCodecs.selectedItem.value)}),this.audioBitsPerSecondThrottle=new yt(()=>{Object(i.a)("settings","audioBitsPerSecond",this.audioBitsPerSecond.value)},1e3),this.audioBitsPerSecond=new y(128),this.audioBitsPerSecond.addEventListener(m.CHANGE,this.audioBitsPerSecondThrottle.throttle),this.audioCodecs=new f("opus"),this.audioCodecs.selectedItem.value=this.audioCodecs.value[0],this.audioCodecs.selectedItem.addEventListener(m.CHANGE,()=>{Object(i.a)("settings","audioCodec",this.audioCodecs.selectedItem.value)}),this.darkModeMatchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.isColorThemeLight=new g,this.isColorThemeLight.addEventListener(m.CHANGE,t=>{let e={txt:"scrollCaptureColorTheme",isColorThemeLight:t.data};Ut.model.sendMessage(e)}),this.colorThemes=new f("Dark","Light","Auto"),this.colorThemes.selectedItem.value="Dark",this.switchColorTheme(),this.colorThemes.selectedItem.addEventListener(m.CHANGE,()=>{Object(i.a)("settings","colorTheme",this.colorThemes.selectedItem.value),this.switchColorTheme()})}windowResizeHandler(){this.windowSize.removeEventListener(m.CHANGE,this.windowSizeChangeHandler),this.windowSize.x.value=window.innerWidth,this.windowSize.y.value=window.innerHeight,this.windowSize.addEventListener(m.CHANGE,this.windowSizeChangeHandler)}windowSizeChangeHandler(){Ut.model.sendMessage({txt:"scrollCaptureResizeWindow",width:this.windowSize.x.value,height:this.windowSize.y.value})}switchColorTheme(){let t=this.colorThemes.selectedItem.value;switch(t){case"Dark":case"Light":this.darkModeMatchMedia.removeEventListener("change",this.darkModeChangeHandler),this.isColorThemeLight.value="Light"==t;break;default:this.darkModeMatchMedia.addEventListener("change",this.darkModeChangeHandler),this.darkModeChangeHandler()}}darkModeChangeHandler(){let t=this.darkModeMatchMedia.matches;this.isColorThemeLight.value=!t}serialize(){return{position:this.position.serialize(),videoBitsPerSecond:this.videoBitsPerSecond.serialize(),videoCodec:this.videoCodecs.selectedItem.serialize(),audioBitsPerSecond:this.audioBitsPerSecond.serialize(),audioCodec:this.audioCodecs.selectedItem.serialize(),colorThemes:this.colorThemes.selectedItem.value}}deserialize(t){t&&(this.position.deserialize(t.position),this.videoBitsPerSecond.deserialize(t.videoBitsPerSecond),this.videoCodecs.selectedItem.deserialize(t.videoCodec),this.audioBitsPerSecond.deserialize(t.audioBitsPerSecond),this.audioCodecs.selectedItem.deserialize(t.audioCodec),t.hasOwnProperty("colorThemes")&&(this.colorThemes.selectedItem.value=t.colorThemes))}}class ft extends R{constructor(){super({selectedAction:"Pause"}),this.save=this.save.bind(this),this.showCaptureIcon=new g,this.isSaving=new g,this.settings=new wt,this.actions=new gt,this.actions.addEventListener("add",t=>{this.save()}),this.actions.addEventListener("remove",t=>{this.save()})}get actions(){return this._actions}set actions(t){this._actions=t,this.dispatchEvent(new d("change_actions",t))}sendMessage(t){chrome.runtime.sendMessage(t)}save(){this.isSaving.value=!0;let t={actions:this.actions.serialize(),settings:this.settings.serialize()},e=JSON.stringify(t);chrome.storage.local.set({json:e},()=>{setTimeout(()=>{this.isSaving.value=!1},100)})}clearActions(){Object(i.a)("clearActions","click"),this.actions.clear(),this.save()}}class xt extends EventTarget{constructor({load:t,show:e,hide:s,branches:i,defaultChild:n,getBranch:a}={}){super(),this.branches=i||{},t&&(this.load=t),e&&(this.show=e),s&&(this.hide=s),a&&(this.getBranch=a),this._defaultChild=n,this._parent=null,this._path=null,this._router=null,this._slug=null}getBranch(t){let e;return this.branches[t]?e=this.branches[t]:this.branches["*"]?e=this.branches["*"]:(e=new xt,console.log("No branch named "+t+", default branch was created")),e}load(t,e){return Promise.resolve()}show(t){return Promise.resolve()}hide(t){return Promise.resolve()}get defaultChild(){return this._defaultChild}set defaultChild(t){this._defaultChild=t}get parent(){return this._parent}set parent(t){this._parent=t}get path(){return this._path}set path(t){this._path=t}get router(){return this._router}set router(t){this._router=t}get slug(){return this._slug}set slug(t){this._slug=t}}class bt{constructor(t,e,s,i=!0){this.eventTarget=t,this.type=e,this.eventHandler=s,this.enabled=i}set enabled(t){this._enabled=t,t?this.eventTarget.addEventListener(this.type,this.eventHandler):this.eventTarget.removeEventListener(this.type,this.eventHandler)}destroy(){this.enabled=!1,this.eventTarget=null,this.type=null,this.eventHandler=null}}function _t(t){return null!=t&&null!=t&&""!=t}class Et extends EventTarget{constructor(t,e,s=null){super(),this.changeHandler=this.changeHandler.bind(this),this._value=null,this.getValue=new Function("return "+t).bind(e),this.callback=s;let i=t;for(let t=0;t<"+/*-[](){}!?%$=:;`".length;t++){let e="+/*-[](){}!?%$=:;`".charAt(t);i=i.split(e).join(" ")}let n=i.split(" ").filter(t=>_t(t)&&-1==t.indexOf("'")&&-1==t.indexOf('"'));this.eventHandlers=[],n.map((t,s)=>{let i=t.split("."),n=e,a=i.pop();if(i.length>0&&(n=P(i.join("."),e)),n instanceof EventTarget&&null!=n[a]){let t=new bt(n,a,this.changeHandler);this.eventHandlers.push(t)}}),this.changeHandler()}get value(){return this._value}changeHandler(t=null){this._value=this.getValue(),p.dispatch(this,"value",this.value),this.callback&&this.callback(this.value)}destroy(){this.eventHandlers.map(t=>{t.destroy()}),this.eventHandlers=[],this.callback=null,this._value=null}}var Ct=s(2);class St{constructor(t,e,s,i){this.changeHandler1=this.changeHandler1.bind(this),this.changeHandler2=this.changeHandler2.bind(this),this.eventHandler1=this.createEventHandler(t,e,this.changeHandler1),this.eventHandler2=this.createEventHandler(s,i,this.changeHandler2.bind(this)),this.changeHandler2(new p(this.eventHandler2.type,this.eventHandler2.eventTarget[this.eventHandler2.type]))}changeHandler1(t){this.eventHandler2.enabled=!1,this.eventHandler2.eventTarget[this.eventHandler2.type]=t.data,this.eventHandler2.enabled=!0}changeHandler2(t){this.eventHandler1.enabled=!1,this.eventHandler1.eventTarget[this.eventHandler1.type]=t.data,this.eventHandler1.enabled=!0}createEventHandler(t,e,s){let i,n=e.split("."),a=t,r=n.pop();return n.length>0&&(a=P(n.join("."),t)),a instanceof EventTarget?i=new bt(a,r,s):console.log("Object is not an instance of EventTarget, cannot add event listener type '"+r+"'"),i}destroy(){this.eventHandler1.destroy(),this.eventHandler2.destroy()}}class zt extends xt{constructor(t){super(),t&&(this.debug="true"==t.getAttribute("data-debug")),this.element=t,this.componentID=(new Date).getTime(),this.debug&&this.element.setAttribute("data-componentId",this.componentID),this._model=null,this.rectangle=new r,this.globalRectangle=new r,this.windowSize=new r,this.attributes={},this.showDuration=0,this.showDelay=0,this.hideDuration=0,this.hideDelay=0,this.showChildrenDelay=0,this.hideChildrenDelay=0,this.doChildrenAnimationFrame=!1,this.alsoShowChildren=!1,this.calculateGlobalPosition=!1}get element(){return this._element}set element(t){this._element=t,t&&(t.component=this)}get containerElement(){return this.element}removeChild(t){if(this.debug&&console.log("UIList.removeChild",t),t&&this.containerElement==t.parentNode){t.parentNode.removeChild(t);let e=t.component;e&&this.isAdded&&e.elementRemoved()}}appendChild(t){if(t){this.containerElement.appendChild(t);let e=t.component;e&&(this.isAdded&&e.elementAdded(),e.windowResize&&e.windowResize(this.windowSize))}}prependChild(t){this.appendChildAt(t,0)}appendChildAt(t,e=0){let s=this.children;if(e>=s.length)this.appendChild(t);else{let i=s[e];this.insertBefore(t,i)}}insertBefore(t,e){if(t&&e){this.containerElement.insertBefore(t,e);let s=t.component;s&&(this.isAdded&&s.elementAdded(),s.windowResize&&s.windowResize(this.windowSize))}}insertAfter(t,e){let s=this.children.indexOf(e);isNaN(s)?console.log("Can't find depth index for",e):this.appendChildAt(t,s+1)}setAttribute(t,e){this.element.setAttribute(t,e)}get isAdded(){let t;for(this.element&&(t=this.element.parentNode);t&&t!=document.body;)t=t.parentNode;return t==document.body}get children(){let t=[];var e;return this.element&&(e=this.element.children,t=Array.prototype.slice.call(e)),t}get scope(){return this._scope}set scope(t){this._scope=t,this.debug&&console.log("debug UIComponent.scope",t),function(t){let e=t.element;for(let s=0;s<e.attributes.length;s++){let i=e.attributes[s],n=i.value.split("{").join("${");if(-1!=n.indexOf("${")){const e=e=>{t.setAttribute(i.name,e)};t.attributes[i.name]=new Et(Object(Ct.a)("`"+n+"`"),t,e)}}}(this),function(t){const e=[];for(let s=0;s<t.element.attributes.length;s++){const i=t.element.attributes[s];if(-1!=i.name.indexOf("on:")){const s=i.name.split("on:")[1],n=new Function("event",i.value).bind(t);t.attributes[i.name]=new bt(t.element,s,n),e.push(i.name)}}e.map(e=>{t.element.removeAttribute(e)})}(this),function(t,e="set:"){const s=[];for(let i=0;i<t.element.attributes.length;i++){const n=t.element.attributes[i];if(-1!=n.name.indexOf(e)){const i=n.name.split(e)[1],a=e=>{t[i]=e};t.attributes[n.name]=new Et(n.value,t,a),s.push(n.name)}}s.map(e=>{t.element.removeAttribute(e)})}(this),function(t){const e=[];for(let s=0;s<t.element.attributes.length;s++){const i=t.element.attributes[s];if(-1!=i.name.indexOf("bind:")){const s=i.name.split("bind:")[1];t.attributes[i.name]=new St(t,"this."+s,t,i.value),e.push(i.name)}}e.map(e=>{t.element.removeAttribute(e)})}(this)}get model(){return this._model}set model(t){t!=this._model&&(this._model=t,p.dispatch(this,"model",t))}load(){let t=[],e=this.children;for(let s=0;s<e.length;s++){let i=e[s].component;i&&i.load&&t.push(i.load())}return Promise.all(t)}show(t){return console.log("UIComponent.show",t),x(this.showDelay).then(()=>(this.showPromises=[this.showDelayComplete()],this.alsoShowChildren&&this.showPromises.push(this.showChildren()),Promise.all(this.showPromises))).then(this.showComplete.bind(this))}showDelayComplete(){return this.isVisible=!0,this.element&&this.element.setAttribute("data-state","show"),x(this.showDuration)}showComplete(){}showChildren(){let t=[],e=0,s=this.children;for(let i=0;i<s.length;i++){let n=s[i].component;n&&(this.showChildrenDelay>0&&(n.showDelay=e,e+=this.showChildrenDelay),t.push(n.show()))}return Promise.all(t)}hide(){return x(this.hideDelay).then(()=>(this.hidePromises=[this.hideDelayComplete()],this.alsoShowChildren&&this.hidePromises.push(this.hideChildren()),Promise.all(this.hidePromises))).then(this.hideComplete.bind(this))}hideDelayComplete(){return this.element&&this.element.setAttribute("data-state","hide"),x(this.hideDuration)}hideComplete(){this.isVisible=!1}hideChildren(){let t=[],e=0,s=this.children;for(let i=0;i<s.length;i++){let n=s[i].component;n&&(this.hideChildrenDelay>0&&(n.hideDelay=e,e+=this.hideChildrenDelay),t.push(n.hide()))}return Promise.all(t)}windowResize(t){this.windowSize=t,this.rectangle.x=this.element.offsetLeft,this.rectangle.y=this.element.offsetTop,this.rectangle.width=this.element.offsetWidth,this.rectangle.height=this.element.offsetHeight,this.globalRectangle.width=this.rectangle.width,this.globalRectangle.height=this.rectangle.height,this.calculateGlobalPosition&&(this.globalRectangle.position=l(this.element,document.body));let e=this.children;for(let s=0;s<e.length;s++){let i=e[s].component;i&&i.windowResize&&i.windowResize(t)}}animationFrame(t){if(this.animationFrameData=t,this.doChildrenAnimationFrame){let e=this.children;for(let s=0;s<e.length;s++){let i=e[s].component;i&&i.animationFrame(t)}}}orientationChange(t){this.orientation=t;let e=this.children;for(let s=0;s<e.length;s++){let i=e[s].component;i&&i.orientationChange&&i.orientationChange(t)}}elementAdded(){let t=this.children;for(let e=0;e<t.length;e++){let s=t[e].component;s&&s.elementAdded()}}elementRemoved(){let t=this.children;for(let e=0;e<t.length;e++){let s=t[e].component;s&&s.elementRemoved()}}static getRect(t,e,s){e||(e=document.body);let i=new r(0,0,t.offsetWidth,t.offsetHeight);return t.parentNode&&(i.position=l(t,e,null,s)),i}getRect(t,e){return zt.getRect(this.element,t)}querySelector(t){let e=this.element.querySelector(t);return e||console.log("No element with selector "+t+" in "+this),e.component||e}querySelectorAll(t){let e=[],s=this.element.querySelectorAll(t);for(let t=0;t<s.length;t++){let i=s.item(t);e.push(i.component||i)}return e}getTouchPoint(t){let e=t;return h&&(e=t.touches[0]),new a(e.pageX,e.pageY)}dispatchResizeEvent(){this.element.dispatchEvent(new Event("ui-resize",{bubbles:!0,cancelable:!0}))}destroy(){this.debug&&console.log("UIComponent.destroy",this.element);for(let t in this.attributes){this.attributes[t].destroy()}this.model=null,this.scope=null,this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.element.compopnent=null;for(let t in this)this[t]=null}}class Mt extends zt{constructor(t){super(t),this.onRelease=()=>{},this.clickHandler=this.clickHandler.bind(this),this.pressHandler=this.pressHandler.bind(this),this.clickDelayComplete=this.clickDelayComplete.bind(this),this.clickDelay=0,this.element.addEventListener(c.click,this.clickHandler),this.element.addEventListener(c.mousedown,this.pressHandler)}pressHandler(t){this.element.setAttribute("data-event","press")}clickHandler(t){this.element.setAttribute("data-event","click"),this.clickDelay>0?setTimeout(this.clickDelayComplete,1e3*this.clickDelay,t):this.clickDelayComplete(t)}clickDelayComplete(t){this.onRelease&&this.onRelease(t)}destroy(){this.element.removeEventListener(c.click,this.clickHandler),this.element.removeEventListener(c.mousedown,this.pressHandler),super.destroy()}}class Tt{constructor(t,e=null,s=NaN,i=NaN){this.data=t,this.parentScope=e,this.index=s,isNaN(this.index)||(this.index1=s+1),this.length=i}get rootScope(){let t=this,e=this;for(;e;)t=e,e=t.parentScope;return t}toString(){return"Scope "+this.parentScope}}class Ht extends zt{constructor(t){super(t),this._providerAdd=this._providerAdd.bind(this),this._providerRemove=this._providerRemove.bind(this),this._providerSort=this._providerSort.bind(this),this.template='<li is="ui-text">{this.scope.data}</li>',this.templates={},this._provider=new f;let e=[];this.element&&this.children.map(t=>{"TEMPLATE"==t.nodeName.toUpperCase()&&e.push(t)});for(let t=0;t<e.length;t++){let s=e[t],i=s.getAttribute("data-type")||"*";this.templates[i]=s.innerHTML,this.element.removeChild(s)}}get provider(){return this._provider}set provider(t){this.debug&&console.log("UIList.provider",t),this._provider&&this._provider instanceof f&&(this._provider.removeEventListener("add",this._providerAdd),this._provider.removeEventListener("remove",this._providerRemove),this._provider.removeEventListener("sort",this._providerSort)),this._removeElements(this.children.slice()),this._provider=t,this._provider&&(this._provider instanceof f?(this._provider.addEventListener("add",this._providerAdd),this._provider.addEventListener("remove",this._providerRemove),this._provider.addEventListener("sort",this._providerSort),this._addElements(this._provider.value)):this._addElements(this._provider))}_removeElements(t){this.debug&&console.log("UIList._removeElements",t.length);for(let e=0;e<t.length;e++){let s=t[e];this.removeChild(s),D(s)}this.dispatchResizeEvent()}_addElements(t,e=0){this.debug&&console.log("UIList._addElements",t.length);for(let s in t){let i=t[s],n=this._createElement(i,e,t.length);this.appendChildAt(n,e),e++}return this.dispatchResizeEvent(),t}_createElement(t,e,s){return N(this._getTemplateForModel(t),new Tt(t,this.scope,e,s))}_getModelType(t){let e=t.type;return e instanceof m&&(e=e.value),e}_getTemplateForModel(t){let e;if(t){let s=this._getModelType(t);e=this.templates[s]}if(e||(e=this.templates["*"]||this.template),!e)throw new Error("UIList "+this.element.outerHTML+" has no template");return e}_providerAdd(t){this.debug&&console.log("UIList._providerAdd"),this._saveChildrenPositions();let e=[],s=t.data.index,i=t.data.index+t.data.total;for(let t=s;t<i;t++){let s=this.provider.value[t];e.push(s)}return this._addElements(e,s),this.windowResize(this.windowSize),this._setChildrenTransform(),setTimeout(this._resetChildrenTransform.bind(this),0),e}_providerRemove(t){this.debug&&console.log("UIList._providerRemove",t),this._saveChildrenPositions();let e=this.children;this.debug&&console.log("children=",e);let s=[],i=t.data.index,n=t.data.index+t.data.total;this.debug&&console.log("start=",i,"end=",n);for(let t=i;t<n;t++)s.push(e[t]);return this._removeElements(s),this.windowResize(this.windowSize),this._setChildrenTransform(),setTimeout(this._resetChildrenTransform.bind(this),0),s}_providerSort(t){this._saveChildrenPositions();let e=this.provider.value;for(let t=0;t<e.length;t++){let s=e[t],i=this.getElementByModel(s);i&&this.element.appendChild(i)}this.windowResize(this.windowSize),this._setChildrenTransform(),setTimeout(this._resetChildrenTransform.bind(this),0)}getElementByModel(t){return this.children.find(e=>{let s=!1;return e.component&&(s=e.component.model==t),s})}_saveChildrenPositions(){this.childrenPositions=[],this.children.map(t=>{this.childrenPositions.push({child:t,position:new a(t.offsetLeft,t.offsetTop)})})}_setChildrenTransform(){this.childrenPositions.map((t,e)=>{let s=new a(t.child.offsetLeft,t.child.offsetTop),i=t.position.subtract(s);i.magnitude>0&&(t.child.classList.remove("smooth-transform"),t.child.style.transform="translate3d("+i.x+"px, "+i.y+"px, 0px)")})}_resetChildrenTransform(){this.children.map((t,e)=>{t.classList.add("smooth-transform"),t.style.transform="translate3d(0px, 0px, 0px)"})}scrollToElement(t,e){let s=new a,i=new a;i.x=this.element.scrollWidth-this.element.clientWidth,i.y=this.element.scrollHeight-this.element.clientHeight;let n=new r(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight);return s.x=Math.min(n.x,i.x),s.y=Math.min(n.y,i.y),this.scrollTo(s.x,s.y,e)}scrollTo(t,e,s=1){return this.tween=new z(0,s,[new M(this.element,"scrollLeft",this.element.scrollLeft,t,F.cubic.easeInOut,n.f),new M(this.element,"scrollTop",this.element.scrollTop,e,F.cubic.easeInOut,n.f)]),this.tween.start()}destroy(){this.childrenPositions=null,this.provider=null,super.destroy()}}class Lt extends Ht{constructor(t){super(t),this._mouseDownHandler=this._mouseDownHandler.bind(this),this._dragMove=this._dragMove.bind(this),this._dragElementMove=this._dragElementMove.bind(this),this._dragEnd=this._dragEnd.bind(this),this.selectItemOnMouseDown=!1,this.isDragged=!1,this.dragIndex=NaN,this.dragElementClass="ui-list-drag-area",this.element.addEventListener(c.mousedown,this._mouseDownHandler)}_mouseDownHandler(t){let e=NaN,s=this.children.find((s,i)=>{let n=s.contains(t.target),a=s==t.target,r=n||a;return this.debug&&console.log(i,"contains",n,"isChild",a,"isMatch",r),r&&(e=i),r});if(s){this.selectItemOnMouseDown&&this.provider.selectedIndex&&(this.provider.selectedIndex.value=e),t.target.classList.contains(this.dragElementClass)&&(t.preventDefault(),this.dragStartPoint=this.getTouchPoint(t),this.dragIndex=NaN,this.dragElement=s,this.dragIndex=e,this.dragElementStartPos=new a(this.dragElement.offsetLeft,this.dragElement.offsetTop),this.dragElementsMinHeight=Number.MAX_VALUE,this.children.map(t=>{this.dragElementsMinHeight=Math.min(this.dragElementsMinHeight,t.component.rectangle.height)}),document.body.addEventListener(c.mousemove,this._dragMove),document.body.addEventListener(c.mouseup,this._dragEnd))}}_dragMove(t){let e=this.getTouchPoint(t);a.distance(e,this.dragStartPoint)>0&&(document.body.removeEventListener(c.mousemove,this._dragMove),document.body.addEventListener(c.mousemove,this._dragElementMove),this._dragElementStart())}_dragElementStart(){this.isDragged=!0,this.dragElement.classList.add("is-dragged"),this.dragElement.dispatchEvent(new Event("drag-start",{bubbles:!1,cancelable:!0}))}_dragElementMove(t){t.preventDefault();let e=this.getTouchPoint(t),s=e.subtract(this.dragStartPoint),i=s.add(this.dragElementStartPos),n=this.children,r=this.dragIndex;for(let t=n.length-1;t>-1;t--){let e=n[t];i.y<e.component.rectangle.y+this.dragElementsMinHeight/2&&(r=t)}if(r!=this.dragIndex){this.provider.swap(this.dragIndex,r);let t=this.dragElementStartPos;this.dragElementStartPos=new a(this.dragElement.offsetLeft,this.dragElement.offsetTop);let i=this.dragElementStartPos.subtract(t);this.dragStartPoint=this.dragStartPoint.add(i),s=e.subtract(this.dragStartPoint),this.dragIndex=r}this.dragElement.style.transform="translate3d("+s.x+"px, "+s.y+"px, 0px)"}_dragEnd(t){this.isDragged=!1,this.dragElement.classList.remove("is-dragged"),this.dragElement.style.transform="",document.body.removeEventListener(c.mousemove,this._dragMove),document.body.removeEventListener(c.mousemove,this._dragElementMove),document.body.removeEventListener(c.mouseup,this._dragEnd),this.dragStartPoint=null,this.dragIndex=NaN,this.dragElement=null}}class Pt extends zt{constructor(t){super(t)}get scope(){return super.scope}set scope(t){super.scope=t;let e=this.element.textContent;if(e=e.split("{").join("${"),-1!=e.indexOf("${")){let t=t=>{this.model=t};this.expression=new Et("`"+e+"`",this,t)}}get model(){return this.element.textContent}set model(t){t instanceof m&&(t=t.value),this.element.textContent=t}destroy(){return this.expression&&this.expression.destroy(),super.destroy()}}class At extends zt{constructor(t,e=".panel"){super(t),this.scrollingPanel=this.element.querySelector(e),this.wheelDirection=1,this._autoScrollFactor=0,this.infiniteLoop={x:!1,y:!1},this.loopPoint=new a(0,0),this.autoScrollSpeed=1,this.scrollTarget=new a,this.scroll=new a,this.speed=new a,this.momentum=new a,this.minScroll=new a,this.maxScroll=new a,this.size=new r,this.panelSize=new r,this.startTouchDiff=new a,this.springiness=0,this.inertia=1,this.elasticScrollInertia=.1,this.elasticScrollElasticity=new a(.15,0),this.momentumFriction=.965,this.momentumScaleLimit=.5,this.maxScrollReached={x:new g,y:new g},this.wheelHandler=this.wheelHandler.bind(this),this.mousedownHandler=this.mousedownHandler.bind(this),this.mousemoveHandler=this.mousemoveHandler.bind(this),this.mouseupHandler=this.mouseupHandler.bind(this),this.element.addEventListener(c.mousedown,this.mousedownHandler),this.autoScrollTimeoutDuration=4,this._startAutoScroll=this._startAutoScroll.bind(this),this.debug&&console.log("events",c)}set autoScroll(t){this._autoScroll=t,this._stopAutoScroll(),t&&this._startAutoScroll()}get autoScroll(){return this._autoScroll}get wheelEnabled(){return this._wheelEnabled}set wheelEnabled(t){this._wheelEnabled=t,t?this.addWheelHandler():this.removeWheelHandler()}addWheelHandler(){this.removeWheelHandler(),this.element.addEventListener("wheel",this.wheelHandler)}removeWheelHandler(){this.element.removeEventListener("wheel",this.wheelHandler)}wheelHandler(t){t.preventDefault(),this.stopTween(),this.maxScroll.y>0&&(this.scrollTarget.y+=t.deltaY*this.wheelDirection),this.dispatchEvent(new d(At.WHEEL,t))}_startAutoScrollTimeout(){this._stopAutoScrollTimeout(),this.autoScroll&&(this._autoScrollTimeout=setTimeout(this._startAutoScroll,1e3*this.autoScrollTimeoutDuration))}_stopAutoScrollTimeout(){clearTimeout(this._autoScrollTimeout)}_startAutoScroll(){this.autoScroll&&(this.autoScrollTween=new z(0,2,[new M(this,"_autoScrollFactor",0,1,F.cubic.easeInOut)]),this.autoScrollTween.start())}_stopAutoScroll(){this._stopAutoScrollTimeout(),this.autoScrollTween&&this.autoScrollTween.stop(),this._autoScrollFactor=0}tweenTo(t=0,e=0){this.stopTween(),this.tweenPromise=Promise.resolve();let s=this.scroll.x,i=this.scroll.y;if(this.infiniteLoop.x&&this.panelSize.width>0){for(;s-t>this.panelSize.width/2;)s-=this.panelSize.width;for(;s-t<this.panelSize.width/-2;)s+=this.panelSize.width}if(this.infiniteLoop.y&&this.panelSize.height>0){for(;i-e>this.panelSize.height/2;)i-=this.panelSize.height;for(;i-e<this.panelSize.height/-2;)i+=this.panelSize.height}let n=[];return s!=t&&n.push(new M(this.scrollTarget,"x",s,t,F.cubic.easeOut,100)),i!=e&&n.push(new M(this.scrollTarget,"y",i,e,F.cubic.easeOut,100)),n.length>0&&(this.tween=new z(0,.75,n),this.tweenPromise=this.tween.start()),this.tweenPromise}stopTween(){this.tween&&this.tween.stop()}animationFrame(t){super.animationFrame(t);let e=this.windowSize.remScale||1;this.maxScroll.x>0&&(this.scrollTarget.x+=Math.round(e*this.autoScrollSpeed*this._autoScrollFactor*10)/10),this.maxScroll.y>0&&(this.scrollTarget.y+=Math.round(e*this.autoScrollSpeed*this._autoScrollFactor*10)/10);let s=this.scroll.clone();if(!this.isDragging&&!this.ignoreElasticScroll){this.scrollTarget.x=this.scrollTarget.x+this.momentum.x,this.scrollTarget.y=this.scrollTarget.y+this.momentum.y;let t={x:NaN,y:NaN};this.scrollTarget.x<this.minScroll.x&&(t.x=this.minScroll.x),this.scrollTarget.x>this.maxScroll.x&&(t.x=this.maxScroll.x),isNaN(t.x)||(this.scrollTarget.x+=(t.x-this.scrollTarget.x)*this.elasticScrollInertia),this.scrollTarget.y<this.minScroll.y&&(t.y=this.minScroll.y),this.scrollTarget.y>this.maxScroll.y&&(t.y=this.maxScroll.y),isNaN(t.y)||(this.scrollTarget.y+=(t.y-this.scrollTarget.y)*this.elasticScrollInertia),this.momentum.x*=this.momentumFriction,this.momentum.y*=this.momentumFriction;let e=this.size.width*this.elasticScrollElasticity.x,s=this.size.height*this.elasticScrollElasticity.y;this.scrollTarget.x<this.minScroll.x-e&&(this.momentum.x=0,this.scrollTarget.x=this.minScroll.x-e),this.scrollTarget.x>this.maxScroll.x+e&&(this.momentum.x=0,this.scrollTarget.x=this.maxScroll.x+e),this.scrollTarget.y<this.minScroll.y-s&&(this.momentum.y=0,this.scrollTarget.y=this.minScroll.y-s),this.scrollTarget.y>this.maxScroll.y+s&&(this.momentum.y=0,this.scrollTarget.y=this.maxScroll.y+s)}this.speed.x=this.speed.x*this.springiness+(this.scrollTarget.x-this.scroll.x)/this.inertia,this.scroll.x+=this.speed.x,this.speed.y=this.speed.y*this.springiness+(this.scrollTarget.y-this.scroll.y)/this.inertia,this.scroll.y+=this.speed.y,this.scrollDiff=this.scroll.subtract(s),this.maxScrollReached.x.value=this.scroll.x>=this.maxScroll.x,this.maxScrollReached.y.value=this.scroll.y>=this.maxScroll.y;let i=Math.round(10*this.scroll.x)/10,n=Math.round(10*this.scroll.y)/10;if(this.infiniteLoop.y){let t=0-this.loopPoint.y,e=this.panelSize.height-this.size.height+this.loopPoint.y;for(;n<t;)n+=this.panelSize.height;for(;n>e;)n-=this.panelSize.height}this.updateTransform(i,n)}updateTransform(t,e){this.scrollingPanel.style.transform="translate3d("+-t+"px, "+-e+"px, 0)"}windowResize(t){super.windowResize(t),this.updatePanelSize(),this.updateMaxScroll()}updatePanelSize(){this.size.width=this.rectangle.width,this.size.height=this.rectangle.height,this.panelSize.width=this.scrollingPanel.offsetWidth,this.panelSize.height=this.scrollingPanel.offsetHeight}updateMaxScroll(){this.maxScroll.x=Math.max(this.panelSize.width-this.size.width,0),this.maxScroll.y=Math.max(this.panelSize.height-this.size.height,0),this.infiniteLoop.x&&(this.minScroll.x=-1*Number.MAX_VALUE,this.maxScroll.x=Number.MAX_VALUE),this.infiniteLoop.y&&(this.minScroll.y=-1*Number.MAX_VALUE,this.maxScroll.y=Number.MAX_VALUE),this.element.setAttribute("data-scroll-x",this.maxScroll.x>0),this.element.setAttribute("data-scroll-y",this.maxScroll.y>0)}mousedownHandler(t){this.stopTween(),this.removeWheelHandler(),this.momentum.x=this.momentum.y=0,this.scrollTarget.copyFrom(this.scroll),"input"!==t.target.tagName.toLowerCase()&&(this.maxScroll.x<=0&&this.maxScroll.y<=0||(h||t.preventDefault(),this.autoScroll&&this._stopAutoScroll(),this.isDragging=!1,this.scrollStart=this.scroll.clone(),this.touchStart=this.getTouchPoint(t),this.touchPrevious=this.touchStart,window.addEventListener(c.mousemove,this.mousemoveHandler),window.addEventListener(c.mouseup,this.mouseupHandler)))}get isDragging(){return this._isDragging}set isDragging(t){this._isDragging=t,t?this.element.classList.add("drag"):this.element.classList.remove("drag")}static get DRAG_START(){return"dragStart"}static get DRAG_END(){return"dragEnd"}static get WHEEL(){return"wheel"}mousemoveHandler(t){t.preventDefault();let e=this.getTouchPoint(t),s=a.distance(e,this.touchStart);Math.abs(s)>2&&!this.isDragging&&(this.isDragging=!0,this.dispatchEvent(new Event(At.DRAG_START))),this.momentum=this.touchPrevious.subtract(e),this.startTouchDiff=this.touchStart.subtract(e),this.scrollTarget=new a(this.scrollStart.x+this.startTouchDiff.x,this.scrollStart.y+this.startTouchDiff.y),this.touchPrevious=e;let i={x:NaN,y:NaN};this.scrollTarget.x<this.minScroll.x&&(i.x=this.minScroll.x),this.scrollTarget.x>this.maxScroll.x&&(i.x=this.maxScroll.x),isNaN(i.x)||(this.scrollTarget.x=i.x+(this.scrollTarget.x-i.x)*this.elasticScrollElasticity.x),this.scrollTarget.y<this.minScroll.y&&(i.y=this.minScroll.y),this.scrollTarget.y>this.maxScroll.y&&(i.y=this.maxScroll.y),isNaN(i.y)||(this.scrollTarget.y=i.y+(this.scrollTarget.y-i.y)*this.elasticScrollElasticity.y)}getMinimumAbsoluteMomentum(t,e){let s=t<0?-1:1;return t=Math.min(Math.abs(t),e)*s}mouseupHandler(t){window.removeEventListener(c.mousemove,this.mousemoveHandler),window.removeEventListener(c.mouseup,this.mouseupHandler),this.wheelEnabled&&this.addWheelHandler(),this.autoScroll&&this._startAutoScrollTimeout(),this.isDragging=!1;let e=this.size.width*this.momentumScaleLimit;this.momentum.x=this.getMinimumAbsoluteMomentum(this.momentum.x,e);let s=this.size.height*this.momentumScaleLimit;this.momentum.y=this.getMinimumAbsoluteMomentum(this.momentum.y,s),this.dispatchEvent(new Event(At.DRAG_END))}}class It extends zt{constructor(t){super(t),this.init()}init(){S().addEventListener(E.TICK,this.clockTick.bind(this)),window.addEventListener("resize",this.resizeHandler.bind(this)),this.resizeHandler()}clockTick(t){let e={time:Math.round(S().time)/1e3};this.animationFrame(e)}resizeHandler(t){let e=this.getRect();e.orientation=e.width>e.height?"landscape":"portrait",e.orientation!=this.windowSize.orientation&&this.orientationChange(e.orientation),this.windowResize(e)}}A("ui-component",zt),A("ui-button",Mt),A("ui-list",Lt),A("ui-input",class extends zt{constructor(t){switch(super(t),this.inputHandler=this.inputHandler.bind(this),this.blurHandler=this.blurHandler.bind(this),this.element.type){case"radio":case"checkbox":this.inputtype="change";break;default:this.inputtype="input"}this.element.addEventListener("blur",this.blurHandler)}get inputtype(){return this._inputtype}set inputtype(t="input"){this.element.removeEventListener(this.inputtype,this.inputHandler),this._inputtype=t,this.element.addEventListener(this.inputtype,this.inputHandler)}get value(){return this.element.value}set value(t){this.element.value=t,this.debug&&console.log("UIInput.value",value)}get model(){return super.model}set model(t){switch(this.debug&&console.log("UIInput.model",t,"value",this.element.value),this.element.type){case"checkbox":this.element.checked=t;break;case"radio":let e=t==this.element.value;e!=this.element.checked&&(this.element.checked=e);break;default:this.element.value=t}super.model=t}inputHandler(t){let e;switch(this.element.type){case"checkbox":e=this.element.checked;break;case"radio":e=this.element.value,console.log("this.element.checked",this.element.checked);default:e=this.element.value}super.model=e}blurHandler(){if(!this.element.value){let t=this.element.getAttribute("placeholder");t&&(this.model=t)}}destroy(){return this.element.removeEventListener("blur",this.blurHandler),this.element.removeEventListener(this.inputtype,this.inputHandler),super.destroy()}}),A("ui-select",class extends Ht{constructor(t){super(t),this._value=this.element.value,this.template='<option is="ui-text" value="{this.scope.data}">{this.scope.data}</option>',this.inputHandler=this.inputHandler.bind(this),this.element.addEventListener("input",this.inputHandler)}get provider(){return super.provider}set provider(t){let e=this.value;super.provider=t,this.value=e}get value(){return this._value}set value(t){this._value!=t&&(this._value=t,p.dispatch(this,"value",t)),this.element.value=t}_providerAdd(t){let e=this.value,s=super._providerAdd(t);return this.value=e,s}_providerRemove(t){let e=this.value,s=super._providerRemove(t);return this.value=e,s}inputHandler(t){this._value=this.element.value,p.dispatch(this,"value",this._value)}destroy(){this.element.removeEventListener("input",this.inputHandler),super.destroy()}}),A("ui-text",Pt),A("ui-html",class extends Pt{get model(){return this.element.innerHTML}set model(t){this.element.innerHTML=t}}),A("ui-number",class extends Pt{constructor(t){super(t),this._currentValue=0,this.isRank=!1,this.roundDecimal=1,this.applyFormat=!1,this.easing=F.cubic.easeOut,this.updateDelay=0,this.updateDuration=0}get model(){return super.model}set model(t){t instanceof Data&&(t=t.value),isNaN(t)&&(t=0),this.updateDuration>0?(this.updateTween&&this.updateTween.stop(),this.updateTween=new z(this.updateDelay,this.updateDuration,[new M(this,"currentValue",this.currentValue,t,this.easing)]),this.updateTween.start()):super.model=t}get currentValue(){return this._currentValue}set currentValue(t){this._currentValue=t;let e=Object(n.i)(t,this.roundDecimal);this.updateCurrentValue(e)}updateCurrentValue(t){if(this.applyFormat){let e=t.toString().split(".");e.length>0&&(e[0]=Object(n.b)(e[0],","),t=e.length>0?e.join("."):e[0])}this.isRank&&(t+=Object(n.c)(t)),super.model=t}}),A("ui-scroll-pane",At),A("ui-media",class extends zt{constructor(t){super(t)}get model(){return this.element.src}set model(t){t instanceof Data&&(t=t.value),_t(t)?this.element.src=t:this.element.removeAttribute("src")}reload(){let t=this.element.src;this.element.src=t}}),A("ui-toggle",class extends Mt{clickDelayComplete(){return this.model.value=!this.model.value,super.clickDelayComplete(event)}});A("easing-graph-control-points",class extends Lt{constructor(t){super(t),this.dragElementClass="shape"}_dragElementStart(){super._dragElementStart(),Ut.model.actions.selectedItem.value.resetEasing()}_dragElementMove(t){t.preventDefault();let e=this.getTouchPoint(t).subtract(this.dragStartPoint).add(this.dragElementStartPos).clone();e.x=e.x/this.rectangle.width,e.y=1-e.y/this.rectangle.height,this.dragElement.component.model.x.value=e.x,this.dragElement.component.model.y.value=e.y}}),A("control-point-lines",class extends Ht{constructor(t){super(t),this.updateLines=this.updateLines.bind(this)}get provider(){return super.provider}set provider(t){super.provider=t;for(let e in t){let s=t[e];for(let t in s){s[t].addEventListener(m.CHANGE,this.updateLines)}}}windowResize(t){super.windowResize(t),this.updateLines()}updateLines(){this.children.map(t=>{t.component.updateLine()})}}),A("control-point-line",class extends zt{constructor(t){super(t),this.updateLine=this.updateLine.bind(this)}updateLine(){if(!this.model)return;let t=this.element.parentNode.component.rectangle,e=this.model[0].point;e.y=1-e.y;let s=this.model[1].point;s.y=1-s.y;let i=a.distance(e,s),r=Object(n.g)(180*a.getAngle(s,e)/Math.PI),o=new a(e.x*t.width,e.y*t.height),h=`translateX(${o.x}px) translateY(${o.y}px) rotate(${r}deg) scaleX(${i})`;this.element.style.transform=h}}),A("easing-graph-curve",class extends zt{constructor(t){super(t)}get model(){return this._model}set model(t){this._model=t;let e=[],s="";for(let i=0;i<15;i++){let r=i/14,o=new a(r,t.easing.ease(r,0,1,1));e.push(o),s+=Object(n.h)(200*o.x)+","+Object(n.h)(200-200*o.y)+" "}this.element.setAttribute("points",s)}}),A("easing-graph-points",class extends zt{constructor(t){super(t)}get model(){return super.model}set model(t){super.model=t,this.element.innerHTML="";let e=[];for(let s=0;s<15;s++){let i=s/14,n=new a(i,t.easing.ease(i,0,1,1));e.push(n)}for(let t=0;t<e.length;t++){let s=e[t],i=N("<point></point>");i.style.left=100*s.x+"%",i.style.top=100-100*s.y+"%",this.element.appendChild(i)}}});A("easing-graph",class extends zt{constructor(t){super(t)}});A("action-tween",class extends zt{constructor(t){super(t)}get scope(){return this._scope}set scope(t){super.scope=t,this.easing=N('<div class="sc-fields-list" is="ui-component">\n    <div class="sc-field">\n        <span class="sc-input" title="Duration">\n            <span class="sc-icon fas fa-clock"></span>\n            <span class="sc-input-group">\n                <span class="sc-input-unit" is="ui-text" data-unit="s">{this.scope.data.duration.value}</span>\n                <input type="number" step="0.25" min="0" placeholder="0" is="ui-input" bind:model="this.scope.data.duration.value" />\n            </span>\n        </span>\n        <span class="sc-input" title="Delay">\n            <span class="sc-icon fa fa-hourglass-half"></span>\n            <span class="sc-input-group">\n                <span class="sc-input-unit" is="ui-text" data-unit="s">{this.scope.data.delay.value}</span>\n                <input type="number" step="0.25" min="0" placeholder="0" is="ui-input" bind:model="this.scope.data.delay.value" />\n            </span>\n        </span>\n    </div>\n    <div class="sc-field-group" is="ui-component">\n        <div class="sc-field-column">\n            <div class="sc-field">\n                <div class="sc-input" title="Easing">\n                    <span class="sc-icon fa fa-bezier-curve"></span>\n                    <select is="ui-select" set:provider="this.scope.data.easingPresets" bind:value="this.scope.data.easingPresets.selectedItem.value"></select>\n                </div>\n            </div>\n            <div class="sc-field">\n                <span class="sc-input" title="Bezier point1.x">\n                    <span class="sc-icon">X</span>\n                    <input type="number" step="0.01" placeholder="0" is="ui-input" bind:model="this.scope.data.cubicBezierPoints.p1.x.value" />\n                </span>\n                <span class="sc-input" title="Bezier point1.y">\n                    <span class="sc-icon">Y</span>\n                    <input type="number" step="0.01" placeholder="0" is="ui-input" bind:model="this.scope.data.cubicBezierPoints.p1.y.value" />\n                </span>\n            </div>\n            <div class="sc-field" title="Point2.y">\n                <span class="sc-input" title="Bezier point2.x">\n                    <span class="sc-icon">X</span>\n                    <input type="number" step="0.01" placeholder="0" is="ui-input" bind:model="this.scope.data.cubicBezierPoints.p2.x.value" />\n                </span>\n                <span class="sc-input" title="Bezier point2.y">\n                    <span class="sc-icon">Y</span>\n                    <input type="number" step="0.01" placeholder="0" is="ui-input" bind:model="this.scope.data.cubicBezierPoints.p2.y.value" />\n                </span>\n            </div>\n        </div>\n        <div class="sc-field" is="ui-component">\n            <div is="ui-component" class="easing-graph-container">\n                <div is="easing-graph">\n                    \x3c!-- <svg class="curve" x="0px" y="0px" preserveAspectRatio="none" viewBox="0 0 200 200">\n                        <g>\n                            <polyline class="js" is="easing-graph-curve" set:model="this.scope.data.cubicBezierPoints.debugEasing" points=""></polyline>\n                        </g>\n                    </svg>\n                    <div class="points js" is="easing-graph-points" set:model="this.scope.data.cubicBezierPoints.debugEasing"></div> --\x3e\n                    <svg class="curve" x="0px" y="0px" preserveAspectRatio="none" viewBox="0 0 200 200">\n                        <g>\n                            <polyline is="easing-graph-curve" set:model="this.scope.data.cubicBezierPoints.value" points=""></polyline>\n                        </g>\n                    </svg>\n                    <div class="points" is="easing-graph-points" set:model="this.scope.data.cubicBezierPoints.value"></div>\n                    <div is="control-point-lines" is="ui-list" set:provider="this.scope.data.cubicBezierPoints.controlPointsLines">\n                        <template>\n                            <div is="control-point-line" set:model="this.scope.data"></div>\n                        </template>\n                    </div>\n                    <div class="control-points" is="easing-graph-control-points" set:provider="this.scope.data.cubicBezierPoints.controlPoints">\n                        <template>\n                            <div class="control-point" is="ui-component" set:model="this.scope.data" style="left:calc({this.scope.data.x.value} * 100%); top:calc(100% - {this.scope.data.y.value} * 100%)">\n                                <span class="shape">\n                                    <span class="shape-label" is="ui-text">{this.scope.index + 1}</span>\n                                </span>\n                            </div>\n                        </template>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',t),this.appendChild(this.easing)}});A("sc-action-view",class extends zt{constructor(t){super(t)}});class kt extends zt{constructor(t){super(t)}showDelayComplete(){let t=Ut.view.scrollCapture.element.querySelector(".sc-tab[data-id='"+this.slug+"']");t&&t.classList.add("sc-title-tab");let e=super.showDelayComplete();return this.windowResize(this.windowSize),e}hideComplete(){let t=Ut.view.scrollCapture.element.querySelector(".sc-tab[data-id='"+this.slug+"']");return t&&t.classList.remove("sc-title-tab"),super.hideComplete()}}A("sc-scenario",class extends kt{constructor(t){super(t)}showDelayComplete(){let t=super.showDelayComplete();if(this.router.redirect("default",()=>this.path),!Ut.model.actions.selectedItem.value){let t=Ut.model.actions.length.value-1;Ut.model.actions.selectedIndex.value=t}return Ut.model.save(),t}hideDelayComplete(){return Ut.model.actions.selectedItem.value=null,super.hideDelayComplete()}}),A("sc-video",class extends kt{constructor(t){super(t),this.iframe=this.element.querySelector("iframe"),this.iframe.src=chrome.extension.getURL("video-recording.html"),chrome.runtime.onMessage.addListener((t,e,s)=>{switch(t.txt){case"scrollCaptureVideoHeight":this.iframe.style.height=t.height+"px"}})}showDelayComplete(){let t=super.showDelayComplete();return Ut.model.sendMessage({txt:"scrollCaptureShowVideo"}),t}hideComplete(){return Ut.model.sendMessage({txt:"scrollCaptureUnloadVideo"}),super.hideComplete()}}),A("sc-settings",class extends kt{constructor(t){super(t)}showDelayComplete(){let t=super.showDelayComplete();return this.router.redirect("default",()=>this.path),Ut.model.save(),t}});class Nt extends zt{constructor(t){super(t),this.position=null,this.dragStart=this.dragStart.bind(this),this.dragMove=this.dragMove.bind(this),this.dragEnd=this.dragEnd.bind(this),this.element.querySelector(".sc-window.sc-window-main > .sc-title").addEventListener(c.mousedown,this.dragStart),this.windowContent=this.element.querySelector(".sc-window-content[is='sc-window-content-main']").component,this.branches.scenario=this.windowContent.scenario,this.branches.video=this.windowContent.video,this.branches.settings=this.windowContent.settings}dragStart(t){t.preventDefault(),t.target.classList.contains("sc-drag-area")&&(this.startPosition=this.position.serialize(),this.startPoint=this.getTouchPoint(t),document.body.addEventListener(c.mousemove,this.dragMove),document.body.addEventListener(c.mouseup,this.dragEnd))}dragMove(t){let e=this.getTouchPoint(t),s=this.startPoint.subtract(e);this.position.x.value=this.startPosition.x+s.x,this.position.y.value=this.startPosition.y-s.y}dragEnd(t){document.body.removeEventListener(c.mousemove,this.dragMove),document.body.removeEventListener(c.mouseup,this.dragEnd),Ut.model.save()}}function Dt(t,e,s){const i=function(t,e="GET",s=null,i=null,n=null,a=!1,r=15e3,o=5){const h=new Promise((function(l,c){let u,d=0;const p=()=>{u=new XMLHttpRequest,n&&(u.responseType=n),u.onload=t=>{h.progress=1,200===u.status?l(u):c(t)},u.onprogress=t=>{t.lengthComputable&&(h.progress=t.loaded/t.total)},u.onerror=t=>{h.progress=1,c(t)},u.onreadystatechange=t=>{};let m=t;if(a){const t=Math.round(1e9*Math.random());-1===m.indexOf("?")?m+="?":m+="&",m+="nocache="+t.toString()}if(u.open(e,m,!0),u.ontimeout=t=>{d++,d>o?(h.progress=1,c(t)):p()},u.timeout=r,i)for(let t=0;t<i.length;t++){const e=i[t];u.setRequestHeader(e[0],e[1])}s?u.send(s):u.send()};p()}));return h.progress=0,h}(t,"GET",null,null,null,s),n=i.then((function(t){const e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t.response:e.appendChild(document.createTextNode(t.response)),document.querySelector("head").appendChild(e),e}));return Object.defineProperty(n,"progress",{get:function(){return i.progress}}),n}Nt.template='<div class="sc-default" is="scroll-capture" data-theme-light="{this.scope.settings.isColorThemeLight.value}" set:position="this.scope.settings.position" style="right:{this.scope.settings.position.x.value}px; top:{this.scope.settings.position.y.value}px;">\n\t\x3c!-- <ul is="ui-list" set:provider="this.scope.actions">\n\t\t<template>\n\t\t\t<label>\n\t\t\t\t<input class="test-radio" type="radio" is="ui-input" value="{this.scope.data.name.value}" name="options1" bind:model="this.scope.rootScope.selectedAction" />\n\t\t\t\t<span is="ui-text">{this.scope.data.name.value}</span>\n\t\t\t</label>\n\t\t</template>\n\t</ul>\n\t<ul is="ui-list" set:provider="this.scope.actions">\n\t\t<template>\n\t\t\t<label>\n\t\t\t\t<input class="test-radio" type="radio" is="ui-component" value="{this.scope.data.name.value}" name="options2" set:checked="(this.scope.rootScope.selectedAction == this.element.value);" on:change="this.scope.rootScope.selectedAction = this.element.value" />\n\t\t\t\t<span is="ui-text">{this.scope.data.name.value}</span>\n\t\t\t</label>\n\t\t</template>\n\t</ul>\n\t<select is="ui-select" set:provider="this.scope.actions" bind:value="this.scope.selectedAction">\n\t\t<template>\n\t\t\t<option is="ui-text" value="{this.scope.data.name.value}">{this.scope.data.name.value}</option>\n\t\t</template>\n\t</select> --\x3e\n\t<div class="sc-window sc-window-main" is="ui-component">\n\t\t<div class="sc-title">\n\t\t\t<span class="sc-tabs">\n\t\t\t\t<span class="sc-drag-area"></span>\n\t\t\t\t<span class="sc-tab sc-title-tab">\n\t\t\t\t\t<span class="sc-drag-area"></span>\n\t\t\t\t\t<span class="sc-label">Scroll Capture</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<span class="sc-tabs">\n\t\t\t\t<span class="sc-tab">\n\t\t\t\t\t<span class="sc-drag-area"></span>\n\t\t\t\t\t<button is="router-button" data-path="closed" title="Close">\n\t\t\t\t\t\t<span class="sc-icon fas fa-times-circle"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="sc-window-content" is="ui-component">\n\t\t\t<div class="sc-fields" is="ui-component">\n\t\t\t\t<div is="ui-component">\n\t\t\t\t\t<div class="sc-window sc-window-sections" is="ui-component">\n\t\t\t\t\t\t<div class="sc-title">\n\t\t\t\t\t\t\t<span class="sc-tabs">\n\t\t\t\t\t\t\t\t<span class="sc-tab" data-id="scenario">\n\t\t\t\t\t\t\t\t\t<button is="router-button" data-path="scroll-capture/scenario" title="Timeline">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- <span class="sc-icon fas fa-sliders-h"></span> --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-stream"></span>\n\t\t\t\t\t\t\t\t\t\t<span class="sc-label">Timeline</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\x3c!-- <span class="sc-tab" data-id="play" is="ui-component">\n\t\t\t\t\t\t\t\t\t<button is="router-button" data-path="play" title="Play">\n\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-play"></span>\n\t\t\t\t\t\t\t\t\t\t<span class="sc-label">Play</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span> --\x3e\n\t\t\t\t\t\t\t\t<span class="sc-tab" data-id="video" is="ui-component">\n\t\t\t\t\t\t\t\t\t<button is="router-button" data-path="record" title="Capture">\n\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-video"></span>\n\t\t\t\t\t\t\t\t\t\t<span class="sc-label">Capture</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="sc-tabs" is="ui-component">\n\t\t\t\t\t\t\t\t<span class="sc-tab" data-id="settings">\n\t\t\t\t\t\t\t\t\t<button is="router-button" data-path="scroll-capture/settings" title="Settings">\n\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-cogs"></span>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- <span class="sc-label">Settings</span> --\x3e\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sc-window-content" is="sc-window-content-main" is="ui-component">\n\n\t\t\t\t\t\t\t<div class="sc-section sc-fields" is="sc-scenario">\n\t\t\t\t\t\t\t\t<div is="sc-actions-view" data-actions-length="{this.scope.actions.length.value}" set:provider="this.scope.actions">\n\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t<div class="sc-window ui-list-element" is="sc-action-view" data-type="{this.scope.data.type}" set:model="this.scope.data" data-selected="{this.scope.data.isSelectedItem.value}">\n\t\t\t\t\t\t\t\t\t\t\t<div class="sc-title">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-drag-area ui-list-drag-area"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab sc-title-tab">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="ui-list-drag-area"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon {this.scope.data.icon.value}" is="ui-component"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-label">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input size="{this.scope.data.name.length.value}" is="ui-input" bind:model="this.scope.data.name.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab" data-visible="{this.scope.data.isCaptureable.value}" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="ui-list-drag-area"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="sc-set-button" is="ui-button" data-is-capturing="{this.scope.data.isCapturing.value}" set:model="this.scope.data" on:click="this.model.reCapture()" title="Set">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-bullseye"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab" data-visible="{this.scope.data.isTestable.value}" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="ui-list-drag-area"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="sc-test-button" is="ui-button" set:model="this.scope.data" on:click="this.model.play()" data-is-playing="{this.scope.data.isPlaying.value}" title="Play">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-play-circle"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="ui-list-drag-area"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="sc-trash-button" is="ui-button" set:model="this.scope.data" on:click="this.scope.rootScope.actions.removeAction(this.model);" title="Delete">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-trash-alt"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="sc-window-content" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-fields" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-action-fields" is="ui-list" set:provider="this.scope.data.array">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template data-type="ActionScroll">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-action sc-fields-list" is="action-tween">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="ScrollLeft">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">X</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.data.unitX.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" placeholder="0" min="0" is="ui-input" bind:model="this.scope.data.unitX.value" on:focus="this.scope.data.doScroll()" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="ScrollTop">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">Y</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.data.unitY.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" placeholder="0" min="0" is="ui-input" bind:model="this.scope.data.unitY.value" on:focus="this.scope.data.doScroll()" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="Target Selector">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon far fa-dot-circle"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" placeholder="window" is="ui-input" bind:model="this.scope.data.target.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template data-type="ActionSwipe">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-action sc-fields-list" is="action-tween">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-points-list sc-field-column" is="ui-list" set:provider="this.scope.data.points">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="PageX">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">X</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.data.x.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="0" placeholder="0" step="1" is="ui-input" bind:model="this.scope.data.x.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="PageY">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">Y</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.data.y.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="0" placeholder="0" step="1" is="ui-input" bind:model="this.scope.data.y.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template data-type="ActionMouseEvent">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-action sc-fields-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">X</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.data.x.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="1" min="0" placeholder="0" title="PageX" is="ui-input" bind:model="this.scope.data.x.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">Y</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.data.y.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="1" min="0" placeholder="0" title="PageY" is="ui-input" bind:model="this.scope.data.y.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input sc-select" title="MouseEvent Type">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-mouse-pointer"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select is="ui-select" set:provider="this.scope.data.eventTypes" bind:value="this.scope.data.eventTypes.selectedItem.value"></select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="Delay">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-hourglass-half"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="s">{this.scope.data.delay.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="0.25" min="0" placeholder="0" is="ui-input" bind:model="this.scope.data.delay.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template data-type="ActionWait">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-action sc-fields-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="Duration">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-clock"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="s">{this.scope.data.delay.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="0.25" min="0" placeholder="0" is="ui-input" bind:model="this.scope.data.delay.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-space"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template data-type="ActionEval">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-action sc-fields-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea rows="5" is="ui-input" set:model="this.scope.data.code"></textarea>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input" title="Delay">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-hourglass-half"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="s">{this.scope.data.delay.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="0.25" min="0" placeholder="0" is="ui-input" bind:model="this.scope.data.delay.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-space"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="sc-action-buttons">\n\t\t\t\t\t\t\t\t\t<div class="sc-buttons" is="ui-list" set:provider="this.scope.actions.types">\n\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t<button class="sc-action-button" data-type="{this.scope.data.type}" set:model="this.scope.data" is="ui-button" title="{this.scope.data.description.value}" on:click="this.scope.rootScope.actions.cloneAction(this.model);">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon {this.scope.data.icon.value}" is="ui-component"></span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="sc-buttons">\n\t\t\t\t\t\t\t\t\t\t<button is="ui-button" on:click="this.scope.clearActions()" title="Delete all">\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-trash-alt"></span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="sc-section sc-fields" is="sc-video">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<iframe></iframe>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="sc-section sc-fields" is="sc-settings">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class="sc-window">\n\t\t\t\t\t\t\t\t\t\t<div class="sc-title">\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab sc-title-tab">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-adjust"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-label">Color theme</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="sc-window-content" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t<div class="sc-fields" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <span class="sc-label">Theme:</span> --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <div class="sc-color-themes" is="ui-list" set:provider="this.scope.settings.colorThemes">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="sc-radio">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="color-theme" value="{this.scope.data}" is="ui-input" set:model="this.scope.parentScope.settings.colorThemes.selectedItem" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-check"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span is="ui-text">{this.scope.data}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-input sc-select">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas" data-theme="{this.scope.settings.colorThemes.selectedItem.value}" is="ui-component"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select is="ui-select" set:provider="this.scope.settings.colorThemes" bind:value="this.scope.settings.colorThemes.selectedItem.value"></select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-space"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class="sc-window">\n\t\t\t\t\t\t\t\t\t\t<div class="sc-title">\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab sc-title-tab">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon far fa-window-maximize"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-label">Window size</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="sc-window-content" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t<div class="sc-fields" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">W</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.settings.windowSize.x.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="1" min="375" placeholder="375" title="PageX" is="ui-input" bind:model="this.scope.settings.windowSize.x.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon">H</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="px">{this.scope.settings.windowSize.y.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" step="1" min="375" placeholder="375" title="PageY" is="ui-input" bind:model="this.scope.settings.windowSize.y.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class="sc-window">\n\t\t\t\t\t\t\t\t\t\t<div class="sc-title">\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tab sc-title-tab">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-film"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-label">Codecs</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="sc-tabs"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="sc-window-content" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t<div class="sc-fields" is="ui-component">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-input sc-select">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-video"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select is="ui-select" set:provider="this.scope.settings.videoCodecs" bind:value="this.scope.settings.videoCodecs.selectedItem.value"></select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="range" min="1" max="8" step="1" title="Bitrate" is="ui-input" bind:model="this.scope.settings.videoBitsPerSecond.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-space">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="Mbps">{this.scope.settings.videoBitsPerSecond.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span is="ui-text">{this.scope.settings.videoBitsPerSecond.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-input sc-select">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-icon fas fa-volume-up"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select is="ui-select" set:provider="this.scope.settings.audioCodecs" bind:value="this.scope.settings.audioCodecs.selectedItem.value"></select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-field">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="range" min="16" max="128" step="16" is="ui-input" bind:model="this.scope.settings.audioBitsPerSecond.value" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="sc-space">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="sc-input-unit" is="ui-text" data-unit="kbps">{this.scope.settings.audioBitsPerSecond.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span is="ui-text">{this.scope.settings.audioBitsPerSecond.value}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<sc-credits><a href="http://www.patrickmatte.com" target="_blank"></a></sc-credits>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',A("sc-actions-view",class extends Lt{constructor(t){super(t),this.selectItemOnMouseDown=!0}_providerAdd(t){let e=super._providerAdd(t),s=this.getElementByModel(e[0]);return this.scrollToElement(s,.5),e}_dragEnd(t){let e=this.isDragged,s=super._dragEnd(t);return e&&Ut.model.save(),s}}),A("sc-window-content-main",class extends zt{constructor(t){super(t),this.scenario=this.element.querySelector("[is='sc-scenario']").component,this.video=this.element.querySelector("[is='sc-video']").component,this.settings=this.element.querySelector("[is='sc-settings']").component}});class Ot extends Mt{constructor(t){super(t),this.pushState=!0}clickHandler(t){t.preventDefault(),super.clickHandler(t)}clickDelayComplete(t){super.clickDelayComplete(t);let e=this.element.href;if(e){let t=e.substr(this.router.absoluteBasePath.length);this.pushState&&this.router.pushState(t)}else this.router.location=this.element.getAttribute("data-path")}}class Rt extends It{constructor(t){super(document.body),this.scope=Ut.model,this.scrollCapture=N(Nt.template,Ut.model).component,this.appendChild(this.scrollCapture.element),Ut.model.showCaptureIcon.addEventListener(m.CHANGE,t=>{this.element.setAttribute("is-capturing",t.data)})}load(){let t=Dt(chrome.extension.getURL("content.css")),e=Dt(chrome.extension.getURL("fontawesome.css"));return Promise.all([t,e])}}A("router-button",class extends Ot{get router(){return Ut.controller.router}}),A("scroll-capture",Nt);class Xt{constructor(t=[]){this.assets=t}get progress(){let t=0,e=this.assets.length;for(let s=0;s<this.assets.length;s++){const i=this.assets[s];i.hasOwnProperty("progress")?t+=i.progress:e--}return e>0?t/=e:t=1,t}push(t){return this.assets.push(t),t}}class Ft extends EventTarget{constructor(t){super(),this.root=t,this._location=null,this.goToAllLocations=!1,this.interruptTransitions=!0,this._inTransition=!1,this._interruptingLocations=[],this.branches=new f,this.redirects={},this.parameters={},this.show=new Bt(this,"show",this._showComplete.bind(this)),this.show.tasks=[new Yt("load",!0),new Yt("show",!1)],this.hide=new Bt(this,"hide",this._hideComplete.bind(this)),this.hide.tasks=[new Yt("hide",!1)]}static get INTERRUPT(){return"interrupt"}static get CHANGE(){return"change"}static get COMPLETE(){return"complete"}get root(){return this._root}set root(t){this._root=t}get location(){return this._location}set location(t){if(this.debug&&console.log("Router set location",t),-1!==t.indexOf("?")&&(t=t.split("?")[0]),this._inTransition)if(this.goToAllLocations){this._interruptingLocations[this._interruptingLocations.length-1]!==t&&this._interruptingLocations.push(t)}else this._interruptingLocations=[t];else this.changeTheLocation(t)}start(){this.location=""}pushState(t){this.location=t}changeTheLocation(t){const e=t.split("&");this.parameters={};for(let t=0;t<e.length;t++){const s=e[t],i=s.indexOf("=");if(-1!==i){const t=[];t[0]=s.substr(0,i),t[1]=s.substr(i+1),this.parameters[t[0]]=t[1]}}let s=e[0],i=s.charAt(s.length-1);for(;"/"===i;)s=s.substr(0,s.length-1),i=s.charAt(s.length-1);if(s=this._applyRedirect(s),s!==this._location){this._inTransition=!0,this._location=s;const t=new d(Ft.CHANGE,{location:s});this.dispatchEvent(t),this._nextLocation="root",""!==s&&(this._nextLocation+="/"+s),setTimeout(()=>{this._startTransitions()},0)}else this._showComplete()}_applyRedirect(t){const e=this.redirects[t];let s;return e&&(s=e()),s=s||t,s!==t&&(s=this._applyRedirect(s)),s}_startTransitions(){const t=this.branches.value.map(t=>t.slug),e=this._nextLocation.split("/");let s=-1;for(let i=0;i<t.length;i++){t.slice(0,i+1).join("/")===e.slice(0,i+1).join("/")&&(s=i)}this.hide.branches=this.branches.splice(s+1).reverse();let i=this;this.branches.length>0&&(i=this.branches.item(this.branches.length-1));const n=[];for(let t=s+1;t<e.length;t++){const s=e[t],a=this.getBranchFromSlug(i,s);n.push(a),i=a}this.checkForDefaultBranches(i,n),this.show.branches=n,this.hide.start()}checkForDefaultBranches(t,e){if(t&&t.defaultChild){const s=t.defaultChild,i=this.getBranchFromSlug(t,s);i&&(e.push(i),this.checkForDefaultBranches(i,e))}}getBranchFromSlug(t,e){let s;if(e){if(!t.getBranch)throw new Error("The branch '"+t.slug+"' doesn't implement the getBranch method for '"+e+"'");s=t.getBranch(e),s.router=this,s.parent=t,s.root=t.root,s.slug=e;let i="";i=t===this?"":"root"===t.slug?e:t.path+"/"+e,s.path=i}return s}_hideComplete(t){let e=!1;if(this.interruptTransitions&&this._interruptingLocations.lenth>0){const t=this._interruptingLocations[0];null===t&&void 0===t||(e=!0)}if(e){this._inTransition=!1;const t=new d(Ft.INTERRUPT,{location:this.location});this.dispatchEvent(t),this.changeTheLocation(this._interruptingLocations.shift())}else this.branches.push.apply(this.branches,this.show.branches),this.show.start()}_showComplete(t){this._inTransition=!1;const e=new d(Ft.COMPLETE,{location:this.location});this.dispatchEvent(e),this._interruptingLocations.length>0&&this.changeTheLocation(this._interruptingLocations.shift())}getBranch(t){return this.root}redirect(t,e){e?this.redirects[t]=e:delete this.redirects[t]}destroy(){this._interruptingLocations=null,this.branches=null,this.redirects=null,this.root=null,this.popStateBind=null}toString(){return"[Router location="+this.location+"]"}}class Bt{constructor(t,e,s){this.router=t,this.name=e,this.onComplete=s,this.branches=[],this.tasks=[]}start(){if(this.branches.length>0){let t;for(let e=this.tasks.length-1;e>-1;e--){const s=this.tasks[e];s.router=this.router,s.branches=this.branches.slice(),s.onComplete=t?t.start.bind(t):this.tasksComplete.bind(this),t=s}this.tasks[0].start()}else this.tasksComplete()}tasksComplete(){this.onComplete()}}class Yt{constructor(t,e){this.name=t,this.preload=e,this.branches=[],this.router=null,this.checkProgressBind=this.checkProgress.bind(this)}start(){if(this.preloader=null,this.assets=[],this.branches.length>0)if(this.preload){for(let t=0;t<this.branches.length;t++)this.assets.push(new Xt);if(this.assetList=new Xt(this.assets.slice()),this.preloader=this.router.preloader,this.preloader){this.isPreloading=!0,this.checkProgress();const t=this.preloader.show();t?t.then(t=>{this.startNextBranch()}):this.startNextBranch()}else this.startNextBranch()}else this.startNextBranch();else this.allComplete()}checkProgress(){this.assetList&&(this.preloader.progress=this.assetList.progress),this.isPreloading&&(this.animationFrame=requestAnimationFrame(this.checkProgressBind))}startNextBranch(){this.branch=this.branches.shift();let t=this.branch[this.name];if(t){t=t.bind(this.branch);const e=this.assets.shift(),s=t(this.branch,e);s?s.then(this.branchComplete.bind(this)):this.branchComplete()}else this.branchComplete()}branchComplete(){if(this.branches.length>0)this.startNextBranch();else if(this.preloader){this.isPreloading=!1;const t=this.preloader.hide();t?t.then(this.allComplete.bind(this)):this.allComplete()}else this.allComplete()}allComplete(){this.assets=null,this.assetList=null,this.branches=null,window.requestAnimationFrame(()=>{this.onComplete()})}}class Vt extends xt{constructor(){super(),this.isPlaying=!1,this.startLocation="scroll-capture/scenario"}show(){return this.isPlaying=!0,this.router.redirect("default",()=>this.startLocation),Ut.model.save(),Ut.model.actions.selectedIndex.value=0,x(.25).then(()=>this.triggerAction())}triggerAction(){if(!this.isPlaying)return;let t=Ut.model.actions.selectedItem.value;if(t){t.triggerDelay().then(()=>this.actionComplete())}else this.allComplete()}actionComplete(){this.isPlaying&&(Ut.model.actions.selectedIndex.value<Ut.model.actions.value.length-1?(Ut.model.actions.selectedIndex.value=Ut.model.actions.selectedIndex.value+1,this.triggerAction()):this.allComplete())}allComplete(){this.isPlaying&&(this.isPlaying=!1,this.router.location=this.startLocation)}hide(){return this.isPlaying=!1,super.hide()}}class jt extends Vt{constructor(){super(),this.startLocation="scroll-capture/video"}show(){return Object(i.a)("record-actions-length",Ut.model.actions.value.length.toString()),Ut.model.actions.value.length<1&&(this.timeout=new vt,this.timeout.delay.value=300,Ut.model.actions.addAction(this.timeout)),x(.25).then(()=>(Ut.model.sendMessage({txt:"scrollCaptureStartRecording"}),super.show()))}allComplete(){this.isPlaying&&(this.stopTheRecording(),super.allComplete())}stopTheRecording(){Ut.model.sendMessage({txt:"scrollCaptureStopRecording"}),Ut.model.sendMessage({txt:"scrollCaptureUpdateVideo"})}hide(){return window.removeEventListener("onbeforeunload",this.onBeforeUnloadHandler),this.isPlaying&&this.stopTheRecording(),this.timeout&&(Ut.model.actions.removeAction(this.timeout),this.timeout=null),super.hide()}}class qt extends xt{constructor(){super()}show(){return Ut.model.save(),super.show()}}class Gt extends xt{constructor(){super(),this.trackRouterLocation=this.trackRouterLocation.bind(this),this.beforeUnloadHandler=this.beforeUnloadHandler.bind(this),this.router=new Ft(this),this.router.redirect("default",()=>"scroll-capture/scenario"),this.router.addEventListener(Ft.CHANGE,this.trackRouterLocation),this.branches={"scroll-capture":Ut.view.scrollCapture,play:new Vt,record:new jt,closed:new qt},window.addEventListener("beforeunload",this.beforeUnloadHandler)}trackRouterLocation(){Object(i.b)("/"+this.router.location)}beforeUnloadHandler(t){this.router.removeEventListener(Ft.CHANGE,this.trackRouterLocation),this.router.location=""}load(){let t=Ut.view.load(),e=new Promise((t,e)=>{chrome.storage.local.get(["json"],e=>{t(e)})});return Promise.all([e,t]).then(t=>{if(t[0]){let e=t[0].json;if(e){let t=JSON.parse(e);Ut.model.actions.deserialize(t.actions),Ut.model.settings.deserialize(t.settings)}}})}show(){Object(i.a)("ScrollCaptureStart",window.location.origin+window.location.pathname)}hide(){}}let Ut;class Wt{constructor(){Ut=this,this.model=new ft,this.view=new Rt,this.controller=new Gt}}window.scrollCaptureApp||(window.scrollCaptureApp=new Wt),Ut=window.scrollCaptureApp,Ut.controller.router.location="default"}]);